{"id":"bdel-03g","title":"Activity feed notifications","description":"Add notification support to the activity feed for important events.\n\nPrerequisites:\n- Filter by 'important' events (high priority, blocked, etc.)\n- Notifications poll for updates to filtered results\n\nCould use Emacs notification system or mode-line indicator.","status":"open","priority":4,"issue_type":"feature","created_at":"2026-01-06T21:37:17.883282+01:00","created_by":"ctm","updated_at":"2026-01-06T21:37:29.605376+01:00","dependencies":[{"issue_id":"bdel-03g","depends_on_id":"bdel-k7e","type":"blocks","created_at":"2026-01-06T21:37:29.646963+01:00","created_by":"ctm"}]}
{"id":"bdel-04e","title":"Implement close issue command","description":"Add functionality to close issues from within beads.el. Currently shows \"Close issue not yet implemented\" message in beads-transient.el.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T14:11:19.180412+01:00","updated_at":"2025-12-17T14:39:19.659398+01:00","closed_at":"2025-12-17T14:39:19.659398+01:00","close_reason":"Implemented: works from list and detail view, prompts for optional reason"}
{"id":"bdel-0ah","title":"Show suggest-next issues after close","description":"After closing an issue, display newly unblocked issues (suggest-next from beads 0.37.0). Check RPC response for suggested issues and display to user. Tests included.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-06T07:42:33.532463+01:00","created_by":"ctm","updated_at":"2026-01-06T08:10:51.782091+01:00","closed_at":"2026-01-06T08:10:51.782091+01:00","close_reason":"Won't fix: suggest-next is CLI-only, not available via RPC","dependencies":[{"issue_id":"bdel-0ah","depends_on_id":"bdel-wch","type":"parent-child","created_at":"2026-01-06T07:42:48.042894+01:00","created_by":"ctm"}]}
{"id":"bdel-0e9","title":"Auto-refresh beads list in background","description":"Auto-refresh the beads list buffer periodically in the background, preserving the current selection.\n\nRequirements:\n1. Remember which issue is selected (by ID) before refresh\n2. Create `beads-list-goto-id` function to move point to line with specific ID\n3. After refresh, restore selection to the same issue ID\n4. New `beads-autoupdate.el` module for timer management\n5. Buffer-local `beads-autoupdate-message` variable (t by default)\n6. Support dir-local settings to reduce noise in busy projects\n\nUser experience:\n- List updates automatically while browsing\n- Selection stays on the same issue even if list order changes\n- Optional: show \"Refreshed N issues\" message (can disable)\n- Graceful handling when selected issue no longer exists\n\nAcceptance criteria:\n- beads-list-goto-id finds issue by ID\n- Selection preserved after manual refresh (g)\n- Selection preserved after auto-refresh\n- Timer starts/stops with buffer lifecycle\n- Message can be disabled buffer-locally\n- Dir-locals work for message setting\n- Graceful when selected issue deleted","design":"Implementation plan:\n\n## 1. Add `beads-list-goto-id` function (beads-list.el)\n```elisp\n(defun beads-list-goto-id (id)\n  \"Move point to the line with issue ID, return t if found.\"\n  (goto-char (point-min))\n  (while (and (not (eobp))\n              (not (equal id (tabulated-list-get-id))))\n    (forward-line 1))\n  (not (eobp)))\n```\n\n## 2. Update `beads-list-refresh` to preserve selection\n- Before refresh: save `(tabulated-list-get-id)`\n- After refresh: call `beads-list-goto-id` with saved ID\n- If ID not found, stay at same line number or top\n\n## 3. Create `beads-autoupdate.el`\n```elisp\n(defcustom beads-autoupdate-interval 30\n  \"Seconds between auto-refresh. nil to disable.\"\n  :type '(choice (const :tag \"Disabled\" nil)\n                 (integer :tag \"Seconds\"))\n  :group 'beads)\n\n(defvar-local beads-autoupdate-message t\n  \"Whether to show message on auto-refresh.\nCan be set in .dir-locals.el to reduce noise.\")\n\n(defvar-local beads-autoupdate--timer nil\n  \"Timer for auto-refresh in this buffer.\")\n\n(defun beads-autoupdate-start ()\n  \"Start auto-refresh timer for current buffer.\")\n\n(defun beads-autoupdate-stop ()\n  \"Stop auto-refresh timer for current buffer.\")\n\n(define-minor-mode beads-autoupdate-mode\n  \"Minor mode for auto-refreshing beads list buffers.\")\n```\n\n## 4. Hook into beads-list-mode\n- Optionally enable autoupdate-mode by default\n- Or provide `beads-list-autoupdate` customization\n\n## 5. Dir-local support\n```elisp\n;; In .dir-locals.el:\n((beads-list-mode . ((beads-autoupdate-message . nil))))\n```","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T13:52:02.286575+01:00","updated_at":"2025-12-17T13:58:18.108909+01:00","closed_at":"2025-12-17T13:58:18.108909+01:00","close_reason":"Implemented: beads-list-goto-id, selection preservation in refresh, beads-autoupdate.el with timer management and dir-local support"}
{"id":"bdel-0kf","title":"Create beads-undo.el core module","description":"Create the core undo/redo module with:\n\n- `beads-undo-entry` cl-defstruct (issue-id, field, old-value, new-value, timestamp, description)\n- `beads-undo--stack` and `beads-undo--redo-stack` variables\n- `beads-undo-limit` customization (default 50)\n- `beads-undo-record` function to push entries\n- `beads-undo` command to undo last edit\n- `beads-redo` command to redo\n- `beads-undo-clear` command to clear history\n- Stack size enforcement (trim when over limit)\n\nDoes NOT include integration with edit commands yet.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T15:01:30.675454+01:00","updated_at":"2025-12-17T15:01:30.675454+01:00","dependencies":[{"issue_id":"bdel-0kf","depends_on_id":"bdel-dyk","type":"parent-child","created_at":"2025-12-17T15:01:45.682167+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-10j","title":"Implement dependency tree view using hierarchy.el","description":"Add a dependency tree visualization for issues using Emacs built-in hierarchy.el library. Display upstream (blockers) and downstream (dependents) in an interactive tree widget.","design":"## Overview\n\nUse Emacs built-in `hierarchy.el` (available since Emacs 28.1) to display issue dependencies as an interactive tree widget with expand/collapse functionality.\n\n## hierarchy.el API Reference\n\n### Core Functions\n\n```elisp\n(require 'hierarchy)\n\n;; Create empty hierarchy\n(hierarchy-new) → hierarchy object\n\n;; Add item with parent relationship\n(hierarchy-add-tree HIERARCHY ITEM PARENTFN \u0026optional CHILDRENFN ACCEPTFN)\n;; PARENTFN: (lambda (item) ...) → parent item or nil for roots\n;; Called recursively to build tree upward\n\n;; Query functions\n(hierarchy-roots HIERARCHY) → list of root items\n(hierarchy-children HIERARCHY ITEM) → direct children\n(hierarchy-length HIERARCHY) → total item count\n```\n\n### Display Functions\n\n```elisp\n;; Tree widget (expandable nodes) - PREFERRED for dependencies\n(hierarchy-tree-display HIERARCHY LABELFN \u0026optional BUFFER)\n\n;; Tabulated list format\n(hierarchy-tabulated-display HIERARCHY LABELFN \u0026optional BUFFER)\n\n;; LABELFN: (lambda (item indent) ...) inserts formatted text\n```\n\n### Label Helpers\n\n```elisp\n;; Add indentation based on depth\n(hierarchy-labelfn-indent LABELFN \u0026optional INDENT-STRING)\n\n;; Make items clickable buttons\n(hierarchy-labelfn-button LABELFN ACTIONFN)\n;; ACTIONFN: (lambda (item indent) ...) called on click\n```\n\n## Beads RPC Data Structures\n\n### From `beads-rpc-show`:\n```elisp\n;; Returns issue with dependency arrays:\n((dependencies . [\n   ((id . \"bdel-xxx\")\n    (title . \"Parent task\")\n    (status . \"open\")\n    (dependency_type . \"parent-child\"))  ; or \"blocks\", \"related\", \"discovered-from\"\n   ...])\n (dependents . [...])\n (dependency_count . 1)\n (dependent_count . 0))\n```\n\n### From `beads-rpc-dep-tree`:\n```elisp\n;; Returns flattened tree with depth info:\n[((id . \"bdel-root\")\n  (title . \"Root issue\")\n  (depth . 0)\n  (parent_id . \"bdel-root\")  ; self-ref for roots\n  (truncated . nil))\n ((id . \"bdel-child\")\n  (depth . 1)\n  (parent_id . \"bdel-root\")\n  ...)]\n```\n\n## Implementation Plan\n\n### New file: lisp/beads-hierarchy.el\n\n```elisp\n;;; beads-hierarchy.el --- Dependency tree view -*- lexical-binding: t -*-\n\n(require 'hierarchy)\n(require 'beads-rpc)\n\n(defgroup beads-hierarchy nil\n  \"Dependency tree display for Beads.\"\n  :group 'beads)\n\n(defface beads-hierarchy-status-open\n  '((t :inherit beads-list-status-open))\n  \"Face for open status in hierarchy.\")\n\n;; ... other faces\n\n(defvar-local beads-hierarchy--root-id nil\n  \"Root issue ID for current hierarchy buffer.\")\n\n(defvar beads-hierarchy-mode-map\n  (let ((map (make-sparse-keymap)))\n    (define-key map (kbd \"q\") #'quit-window)\n    (define-key map (kbd \"g\") #'beads-hierarchy-refresh)\n    (define-key map (kbd \"RET\") #'beads-hierarchy-goto-issue)\n    map))\n\n(define-derived-mode beads-hierarchy-mode special-mode \"Beads-Hierarchy\"\n  \"Mode for displaying issue dependency trees.\")\n```\n\n### Building the Hierarchy\n\n```elisp\n(defun beads-hierarchy--build (issue-id)\n  \"Build hierarchy for ISSUE-ID from dep_tree RPC.\"\n  (let* ((tree-data (beads-rpc-dep-tree issue-id))\n         (h (hierarchy-new))\n         (by-id (make-hash-table :test 'equal)))\n    \n    ;; Index issues by ID for parent lookup\n    (seq-doseq (issue tree-data)\n      (puthash (alist-get 'id issue) issue by-id))\n    \n    ;; Add each issue to hierarchy\n    (seq-doseq (issue tree-data)\n      (hierarchy-add-tree h issue\n        (lambda (i)\n          (let ((pid (alist-get 'parent_id i))\n                (id (alist-get 'id i)))\n            ;; Skip self-referential roots\n            (unless (equal pid id)\n              (gethash pid by-id))))))\n    h))\n```\n\n### Label Function\n\n```elisp\n(defun beads-hierarchy--labelfn (issue indent)\n  \"Insert formatted ISSUE at INDENT level.\"\n  (let ((id (alist-get 'id issue))\n        (title (alist-get 'title issue \"\"))\n        (status (alist-get 'status issue))\n        (type (alist-get 'issue_type issue)))\n    (insert (propertize id 'face 'beads-detail-id-face))\n    (insert \" \")\n    (insert (propertize \n             (truncate-string-to-width title 40 nil nil \"…\")\n             'face 'default))\n    (insert \" \")\n    (insert (propertize (format \"[%s]\" status)\n                        'face (beads-hierarchy--status-face status)))))\n\n(defun beads-hierarchy--status-face (status)\n  \"Return face for STATUS.\"\n  (pcase status\n    (\"closed\" 'beads-list-status-closed)\n    (\"in_progress\" 'beads-list-status-in-progress)\n    (_ 'beads-list-status-open)))\n```\n\n### Entry Point\n\n```elisp\n(defun beads-hierarchy-show (issue-id)\n  \"Display dependency tree for ISSUE-ID.\"\n  (interactive\n   (list (or (and (derived-mode-p 'beads-detail-mode)\n                  beads-detail--current-issue-id)\n             (read-string \"Issue ID: \"))))\n  (let* ((h (beads-hierarchy--build issue-id))\n         (buffer (get-buffer-create (format \"*beads-deps: %s*\" issue-id))))\n    (with-current-buffer buffer\n      (beads-hierarchy-mode)\n      (setq beads-hierarchy--root-id issue-id))\n    ;; Use tree-display for expandable nodes\n    (hierarchy-tree-display h #'beads-hierarchy--labelfn buffer)\n    (display-buffer buffer\n                    '((display-buffer-in-side-window)\n                      (side . right)\n                      (window-width . 0.4)))))\n```\n\n### Navigation\n\n```elisp\n(defun beads-hierarchy-goto-issue ()\n  \"Open detail view for issue at point.\"\n  (interactive)\n  (when-let* ((widget (widget-at (point)))\n              (issue (widget-get widget :node))\n              (id (alist-get 'id issue)))\n    (let ((full-issue (beads-rpc-show id)))\n      (beads-detail-open full-issue))))\n```\n\n## Keybinding Integration\n\nIn `beads-detail.el`, add:\n```elisp\n(define-key beads-detail-mode-map (kbd \"H\") #'beads-hierarchy-show)\n```\n\nIn transient menu, add under Navigation:\n```elisp\n(\"H\" \"Dependency tree\" beads-hierarchy-show)\n```\n\n## Display Considerations\n\n1. **Window placement**: Side window (right) keeps detail view visible\n2. **Tree widget**: Allows expand/collapse of branches\n3. **Clickable nodes**: Use `hierarchy-labelfn-button` for navigation\n4. **Status colors**: Reuse faces from beads-list for consistency\n\n## Alternative: Tabulated Display\n\nIf tree widget proves problematic, `hierarchy-tabulated-display` provides a flatter view with sortable columns - similar to existing list view but with indentation showing depth.\n\n## Testing\n\n1. Create issues with dependencies: `bd dep add bdel-xxx bdel-yyy`\n2. Open detail view for an issue with dependencies\n3. Press `H` to show tree\n4. Verify expand/collapse works\n5. Verify clicking navigates to issue","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-17T22:06:53.918232+01:00","updated_at":"2025-12-17T22:12:35.825192+01:00","closed_at":"2025-12-17T22:12:35.825192+01:00","close_reason":"Implemented using hierarchy.el with tree widget display","dependencies":[{"issue_id":"bdel-10j","depends_on_id":"bdel-c5c","type":"parent-child","created_at":"2025-12-17T22:07:00.303377+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-1ui","title":"Implement edit design notes feature","description":"Add 'e D' keybinding to edit design notes:\n- Same pattern as description editing\n- Opens markdown-mode buffer\n- C-c C-c commits via :design field\n- Buffer name: *beads-edit: ISSUE-ID design*","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T12:59:14.823839+01:00","updated_at":"2025-12-17T13:34:25.157363+01:00","closed_at":"2025-12-17T13:08:02.086461+01:00","close_reason":"Completed","dependencies":[{"issue_id":"bdel-1ui","depends_on_id":"bdel-ab3","type":"parent-child","created_at":"2025-12-17T12:59:36.984012+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-2u2","title":"Sorting options in list view","description":"Add commands to sort by different columns: priority, date, status, title. Currently defaults to date descending. Allow toggling sort direction.","design":"**Current:** Default sort by date descending, can click column headers\n\n**Explicit sort commands:**\n- `o` - Cycle sort column (like dired)\n- `O` - Reverse current sort direction\n- Or use prefix keymap `S`:\n  - `S p` - Sort by priority\n  - `S d` - Sort by date (created_at)\n  - `S u` - Sort by updated_at\n  - `S s` - Sort by status\n  - `S t` - Sort by title\n  - `S i` - Sort by ID\n\n**Implementation:**\n- `tabulated-list-mode` already supports sorting via `tabulated-list-sort-key`\n- Add commands that set sort key and refresh\n- Store sort preference in buffer-local or customize variable\n\n**CLI reference:** `bd list --sort priority|created|updated|status|id|title --reverse`","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-17T19:22:42.701354+01:00","updated_at":"2025-12-19T09:40:05.596736+01:00","closed_at":"2025-12-19T09:40:05.596736+01:00","close_reason":"Added o to cycle sort columns and O to reverse direction"}
{"id":"bdel-3fy","title":"Orphan quick actions","description":"Make orphan buffer interactive with RET/c/g/q bindings for viewing, closing, refreshing","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-06T17:09:45.955476+01:00","created_by":"ctm","updated_at":"2026-01-06T17:18:04.834542+01:00","closed_at":"2026-01-06T17:18:04.834542+01:00","close_reason":"Implemented interactive orphan view with RET/c/g/q bindings in commit 624e9a0","dependencies":[{"issue_id":"bdel-3fy","depends_on_id":"bdel-kv2","type":"parent-child","created_at":"2026-01-06T17:09:56.27474+01:00","created_by":"ctm"}]}
{"id":"bdel-3ph","title":"Implement edit external-ref via minibuffer","description":"Add 'e x' keybinding to edit external reference:\n- Use read-string with current external-ref as default\n- Example values: gh-123, jira-ABC-456\n- Commit via beads-rpc-update with :external-ref","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-17T12:59:16.113614+01:00","updated_at":"2025-12-17T13:08:08.467113+01:00","closed_at":"2025-12-17T13:08:08.467113+01:00","close_reason":"Completed","dependencies":[{"issue_id":"bdel-3ph","depends_on_id":"bdel-ab3","type":"parent-child","created_at":"2025-12-17T12:59:45.339455+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-3sa","title":"Add comments view to issue detail","description":"Display discussion thread comments in issue detail view (from beads 0.38.0). Investigate RPC response format for comments. Tests included.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-06T07:42:34.615765+01:00","created_by":"ctm","updated_at":"2026-01-06T08:13:50.956578+01:00","closed_at":"2026-01-06T08:13:50.956578+01:00","close_reason":"Implemented in commit 5943f94","dependencies":[{"issue_id":"bdel-3sa","depends_on_id":"bdel-wch","type":"parent-child","created_at":"2026-01-06T07:42:48.095057+01:00","created_by":"ctm"}]}
{"id":"bdel-3v1","title":"Integrate undo with label operations","description":"Add undo recording to label add/remove in beads-detail.el:\n\n- beads-detail-edit-label-add: record old labels array, new labels array\n- beads-detail-edit-label-remove: record old labels array, new labels array\n\nFor undo, need to use beads-rpc-update with :set-labels to restore entire label array (simpler than tracking individual add/remove).","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T15:01:31.19597+01:00","updated_at":"2025-12-17T15:01:31.19597+01:00","dependencies":[{"issue_id":"bdel-3v1","depends_on_id":"bdel-dyk","type":"parent-child","created_at":"2025-12-17T15:01:46.113136+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"bdel-3v1","depends_on_id":"bdel-0kf","type":"blocks","created_at":"2025-12-17T15:01:58.973768+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-4dg","title":"Implement edit assignee via minibuffer","description":"Add 'e A' keybinding to edit assignee:\n- Use read-string with current assignee as default\n- Empty string clears assignee\n- Commit via beads-rpc-update with :assignee","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T12:59:15.673096+01:00","updated_at":"2025-12-17T13:08:08.297678+01:00","closed_at":"2025-12-17T13:08:08.297678+01:00","close_reason":"Completed","dependencies":[{"issue_id":"bdel-4dg","depends_on_id":"bdel-ab3","type":"parent-child","created_at":"2025-12-17T12:59:45.109044+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-4e6","title":"Integrate undo with beads-edit.el (markdown edits)","description":"Add undo recording to beads-edit--exit() for markdown field edits:\n\n- description, design, acceptance_criteria, notes\n- Call beads-undo-record before beads-rpc-update\n- Pass: issue-id, field keyword, original content, new content\n- Generate description like \"description on bdel-xyz\"\n\nEdit beads-edit.el lines ~71 to add the hook.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T15:01:30.841452+01:00","updated_at":"2025-12-17T15:01:30.841452+01:00","dependencies":[{"issue_id":"bdel-4e6","depends_on_id":"bdel-dyk","type":"parent-child","created_at":"2025-12-17T15:01:45.822357+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"bdel-4e6","depends_on_id":"bdel-0kf","type":"blocks","created_at":"2025-12-17T15:01:58.67914+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-4hp","title":"Add screenshots for activity feed, stale, and orphans views","description":"Capture screenshots for the new views added in v0.44:\n- Activity feed (beads-activity-mode) - showing live events with glyphs\n- Stale issues (beads-stale-mode) - showing aged issues with days count\n- Orphaned issues (beads-orphans-mode) - showing orphans with commit info\n\nUse modus-themes to match existing screenshots.\nAdd to README.md in the Screenshots section.","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-07T06:09:57.690561+01:00","created_by":"ctm","updated_at":"2026-01-07T06:09:57.690561+01:00"}
{"id":"bdel-51u","title":"Restore scroll position and point on refresh","description":"When refreshing list or detail views, the scroll position and point should be preserved. Currently refresh may jump to a different position.","design":"**Affected views:**\n- `beads-list-refresh` - list view\n- `beads-detail-refresh` - detail view\n- `beads-hierarchy-refresh` - hierarchy view\n\n**Current behavior:**\n- List view attempts to restore position by ID (`beads-list-goto-id`) but doesn't preserve scroll\n- Detail view goes to `(point-min)` after refresh\n\n**Desired behavior:**\n- Save `(window-start)` and `(point)` before refresh\n- After redisplay, restore both\n- If the issue at point was deleted, fall back to same line number\n\n**Implementation pattern:**\n```elisp\n(let ((saved-point (point))\n      (saved-start (window-start)))\n  ;; ... refresh content ...\n  (set-window-start (selected-window) saved-start)\n  (goto-char (min saved-point (point-max))))\n```\n\n**Edge cases:**\n- Content shorter after refresh (deleted issues)\n- Window not visible during refresh\n- Point was on a now-deleted item","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-17T22:19:29.057352+01:00","updated_at":"2025-12-17T22:39:37.956018+01:00","closed_at":"2025-12-17T22:39:37.956018+01:00","close_reason":"Implemented scroll position restoration in list, detail, and hierarchy refresh functions"}
{"id":"bdel-53d","title":"Add parent filtering for epic-scoped views","description":"Add :parent filter support to beads-rpc-list and beads-rpc-ready. Add filter state and transient menu option. Enables viewing only issues under a specific epic. Tests included.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-06T07:42:32.45455+01:00","created_by":"ctm","updated_at":"2026-01-06T08:07:56.230904+01:00","closed_at":"2026-01-06T08:07:56.230904+01:00","close_reason":"Implemented in commit 939b34b","dependencies":[{"issue_id":"bdel-53d","depends_on_id":"bdel-wch","type":"parent-child","created_at":"2026-01-06T07:42:47.991789+01:00","created_by":"ctm"}]}
{"id":"bdel-590","title":"Add/remove labels from detail view","description":"Currently managing labels requires the form editor. Quick label add/remove from detail view enables faster tagging during review. Labels are essential for organization but friction in adding them reduces usage.\n\nUse case: When reviewing issues in detail view, users should be able to quickly add or remove labels without entering the full edit form.\n","design":"Implementation plan for Emacs UI:\n\n1. Commands:\n   - `beads-detail-add-label`: Interactive command to add a label to current issue\n   - `beads-detail-remove-label`: Interactive command to remove a label from current issue\n\n2. Keybindings (in detail view):\n   - `+`: Add label (intuitive symbol for addition)\n   - `-`: Remove label (intuitive symbol for removal)\n\n3. Interactive prompts:\n   - Add label: Use `completing-read` with all known labels in project (collected via `bd label list --json`)\n   - Remove label: Use `completing-read` with current issue's labels\n   - Both support tab completion\n\n4. Display:\n   - Current labels already shown in detail view (verify if clickable)\n   - May add label section header if not present\n\n5. Update mechanism:\n   - Use `beads-rpc-update` with modified labels list\n   - Fetch current issue object\n   - Modify labels array (add/remove)\n   - Send update RPC call\n   - Refresh detail view buffer on success\n\n6. Transient menu integration:\n   - Add entries under \"Edit\" section in detail transient menu\n   - Group with other editing commands\n\n7. Reference implementation:\n   - Check `bd label` CLI commands for label management patterns\n   - Review existing `beads-rpc-update` usage in codebase\n   - Look at how other detail commands refresh the view\n\n8. Error handling:\n   - Handle empty label lists gracefully\n   - Validate label format (no spaces, special chars per beads rules)\n   - Show user feedback on success/failure\n","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-06T21:10:26.646897+01:00","created_by":"ctm","updated_at":"2026-01-09T06:42:29.108619+01:00","closed_at":"2026-01-09T06:42:29.108619+01:00","close_reason":"Already implemented via e l a (add) and e l r (remove) keybindings"}
{"id":"bdel-5a0","title":"Add/remove dependencies from detail view","description":"Currently no direct dependency management in Emacs - must use CLI. Building dependency graphs while reviewing issues is a natural workflow. Quick add/remove of \"blocks\" and \"blocked by\" relationships from detail view.\n","design":"Add commands in beads-detail.el:\n- beads-detail-add-blocker (this issue is blocked by X)\n- beads-detail-remove-blocker\n- beads-detail-add-blocks (this issue blocks X)\n- beads-detail-remove-blocks\n\nKeybindings: prefix 'b' for blocking operations\n- 'b a' add blocker, 'b r' remove blocker\n- 'B a' add blocks, 'B r' remove blocks\n\nPrompt with completion showing open issues\nShow current dependencies in detail view (blocks/blocked_by sections)\nRefresh after changes\nAdd to detail transient menu\nRPC calls: beads-rpc-dep-add, beads-rpc-dep-remove (or CLI fallback)\n\nImplementation:\n1. Add RPC functions for dep_add/dep_remove operations\n2. Add interactive commands for add/remove blocker/blocks\n3. Use completing-read with issue list for selection\n4. Update detail view to display blocks/blocked_by relationships\n5. Refresh detail buffer after dependency changes\n6. Add keybindings to beads-detail-mode-map\n7. Add menu items to detail transient","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-06T21:10:26.294397+01:00","created_by":"ctm","updated_at":"2026-01-06T21:11:37.825678+01:00"}
{"id":"bdel-5as","title":"Comments support","description":"Add support for viewing and adding comments to issues. Need to verify RPC support or use CLI fallback.","design":"**CLI commands:**\n- `bd comments \u003cid\u003e` - List comments on issue\n- `bd comments add \u003cid\u003e \"text\"` - Add comment\n- `bd comments add \u003cid\u003e -f file.txt` - Add from file\n\n**First step:** Check if daemon has comments RPC operations. If not, use CLI fallback with `--json` flag.\n\n**UI design:**\n1. **Detail view section:** Show comments below notes, formatted as:\n   ```\n   Comments:\n   ─────────\n   [2024-01-15 10:30] alice:\n   This needs more testing before release.\n   \n   [2024-01-16 14:20] bob:\n   Added unit tests, ready for review.\n   ```\n\n2. **Add comment:** `c` binding in detail view\n   - Opens edit buffer (like description edit)\n   - On save, calls comments add RPC/CLI\n\n**Lower priority:** Edit/delete comments (if API supports)","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-17T19:22:32.177259+01:00","updated_at":"2025-12-17T21:09:51.588594+01:00"}
{"id":"bdel-5w1","title":"Milestone 1: Read issues from beads and display in interactive list","description":"Our first goal is to teach Emacs to run the Beats.el mode, Introduce that mode in the first place and in that mode list all issues from the Beats database. The database listing then shows in the table view the issue ID, the statios like priority, the kind of task it is, whether it's open or closed, and then also the title of course, but not the description. The description is reserved for the detail view display. So we have an overview and a detail view, and you get to the detail view by interacting with the overview, you're pressing return to essentially open the task in the viewer. Check out @docs/emacs-ui.md for how the UI works and @docs/beads-client-howto.md for the overall plan and approach","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-17T07:55:27.505205+01:00","updated_at":"2025-12-17T11:33:57.46743+01:00","closed_at":"2025-12-17T11:33:57.46743+01:00","close_reason":"All subtasks completed: RPC, list mode, detail view, entry point, transient menus, preview mode, state management, and filter system"}
{"id":"bdel-5z1","title":"Integrate undo with beads-detail.el (inline edits)","description":"Add undo recording to detail view inline edits:\n\n- beads-detail-edit-title (minibuffer)\n- beads-detail-edit-status (completing-read)\n- beads-detail-edit-priority (completing-read)\n- beads-detail-edit-type (completing-read)\n- beads-detail-edit-assignee (minibuffer)\n- beads-detail-edit-external-ref (minibuffer)\n\nEach function already has old value available. Add beads-undo-record call before RPC update.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T15:01:31.016841+01:00","updated_at":"2025-12-17T15:01:31.016841+01:00","dependencies":[{"issue_id":"bdel-5z1","depends_on_id":"bdel-dyk","type":"parent-child","created_at":"2025-12-17T15:01:45.965508+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"bdel-5z1","depends_on_id":"bdel-0kf","type":"blocks","created_at":"2025-12-17T15:01:58.822521+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-6dn","title":"Add vui.el as package dependency","description":"Add vui.el as a required dependency in beads.el. Update package requirements and installation instructions.","status":"closed","priority":2,"issue_type":"task","owner":"noreply@anthropic.com","created_at":"2026-01-14T22:31:49.44408+01:00","created_by":"Christian Tietze","updated_at":"2026-01-14T22:37:34.334528+01:00","closed_at":"2026-01-14T22:37:34.334528+01:00","close_reason":"Added vui 0.1.0 to Package-Requires and updated README requirements"}
{"id":"bdel-6qd","title":"Implement edit type with completing-read","description":"Add 'e T' keybinding to change issue type:\n- Use completing-read with options: bug, feature, task, epic, chore\n- Current type as default\n- Commit via beads-rpc-update with :issue-type","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T12:59:15.533546+01:00","updated_at":"2025-12-17T18:39:50.341031+01:00","closed_at":"2025-12-17T13:08:03.221699+01:00","close_reason":"Completed","dependencies":[{"issue_id":"bdel-6qd","depends_on_id":"bdel-ab3","type":"parent-child","created_at":"2025-12-17T12:59:37.500941+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-70w","title":"Improve list view columns","description":"Add more columns to list view: assignee, labels, type. Make columns configurable via customization variable.","design":"**Current columns:** ID, Date, Status, Pri, Title\n\n**Additional columns to add:**\n- Type (bug/feature/task/epic/chore) - short: B/F/T/E/C\n- Assignee (truncated to fit)\n- Labels (comma-separated, truncated)\n- Dependencies indicator (see below)\n\n**Dependency indicators:**\nShow relationship icons in a narrow column to indicate parent/child relationships:\n\n| Icon | Meaning |\n|------|---------|\n| `↑` | Has parent(s) - this issue depends on others |\n| `↓` | Has child(ren) - other issues depend on this |\n| `↕` | Has both parents and children |\n| ` ` | No dependencies |\n\nAlternative icon sets to consider:\n- Unicode: `▲` `▼` `◆` or `⬆` `⬇` `⬍`\n- ASCII fallback: `^` `v` `*`\n- Tree-style: `├` `└` `│` (for nested grouping view)\n- Blocked indicator: `⊗` or `✗` when blocked by open issues\n\nCould also use propertized text with faces:\n- Red `↑` when blocked by open parents\n- Green `↓` when all children are closed\n- Yellow `↕` for mixed state\n\n**Grouping alternative:**\nInstead of icons, could group issues by epic/parent in the list view using indentation or tree structure. This would require a different display mode toggle.\n\n**Customization:**\n```elisp\n(defcustom beads-list-columns\n  '(id date status priority title)\n  \"Columns to display in beads list view.\nAvailable: id, date, status, priority, type, title, assignee, labels, deps\"\n  :type '(repeat symbol)\n  :group 'beads)\n```\n\n**Column width customization:**\n```elisp\n(defcustom beads-list-column-widths\n  '((id . 10) (title . 50) (assignee . 12) (deps . 3))\n  \"Width overrides for list columns.\"\n  :type '(alist :key-type symbol :value-type integer))\n```\n\n**Implementation:** Modify `beads-list--format` to build columns dynamically based on customization.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-17T19:22:42.547622+01:00","updated_at":"2025-12-19T20:58:23.740639+01:00","closed_at":"2025-12-19T20:58:23.740639+01:00","close_reason":"Added configurable columns with beads-list-columns, plus assignee, labels, and deps columns"}
{"id":"bdel-7mu","title":"Integrate undo with beads-form.el (batch edits)","description":"Add undo recording to beads-form-commit for multi-field edits:\n\n- Create compound undo entry with field type :batch\n- old-value: alist of all original field values\n- new-value: alist of all new field values\n- On undo, call beads-rpc-update with all old values at once\n\nThis ensures form edits undo as a single operation, not field-by-field.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T15:01:31.378955+01:00","updated_at":"2025-12-17T15:01:31.378955+01:00","dependencies":[{"issue_id":"bdel-7mu","depends_on_id":"bdel-dyk","type":"parent-child","created_at":"2025-12-17T15:01:46.256071+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"bdel-7mu","depends_on_id":"bdel-0kf","type":"blocks","created_at":"2025-12-17T15:01:59.112886+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-7wm","title":"Add orphan detection command","description":"Add beads-orphans command to find issues mentioned in commits but never closed (from beads 0.39.0). Use RPC or CLI fallback. Tests included.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-06T07:42:36.726962+01:00","created_by":"ctm","updated_at":"2026-01-06T08:17:31.864465+01:00","closed_at":"2026-01-06T08:17:31.864465+01:00","close_reason":"Implemented beads-orphans command with CLI fallback in commit 3ec2605","dependencies":[{"issue_id":"bdel-7wm","depends_on_id":"bdel-wch","type":"parent-child","created_at":"2026-01-06T07:42:48.145698+01:00","created_by":"ctm"}]}
{"id":"bdel-8gz","title":"Test vui views across Emacs versions","description":"Test vui-based detail and form views on Emacs 27.1, 28.x, 29.x. Document any version-specific issues.","status":"open","priority":2,"issue_type":"task","owner":"noreply@anthropic.com","created_at":"2026-01-14T22:31:59.441945+01:00","created_by":"Christian Tietze","updated_at":"2026-01-14T22:31:59.441945+01:00","dependencies":[{"issue_id":"bdel-8gz","depends_on_id":"bdel-ssf","type":"blocks","created_at":"2026-01-14T22:32:32.534924+01:00","created_by":"Christian Tietze"},{"issue_id":"bdel-8gz","depends_on_id":"bdel-gkk","type":"blocks","created_at":"2026-01-14T22:32:32.600661+01:00","created_by":"Christian Tietze"}]}
{"id":"bdel-92j","title":"Form editor: colons in text content break field boundaries","description":"When a description or other multi-line text field contains colons, the field boundary detection is wrong. The greedy regex matches the last colon, making part of the content appear as a label (non-editable) while only the text after the last colon is editable.\n\nExample: \"Description: some text with: embedded colons\" - only \"embedded colons\" becomes editable.","design":"**Root cause**: Likely in `beads-form--add-text-field` or the face/property application.\n\n**Fix approach**: The label (\"Description:\") should be rendered separately from the widget value. Don't use regex to split - render label with `widget-insert`, then create widget for value only.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-17T18:33:21.523974+01:00","updated_at":"2025-12-17T18:41:32.616755+01:00","closed_at":"2025-12-17T18:41:32.616755+01:00","close_reason":"Fixed by overriding text widget format to \"%v\" instead of default \"%{%t%}: %v\""}
{"id":"bdel-9ik","title":"Form editor: derive from nil, not special-mode","description":"Fixed bug where text fields in the form editor (E) couldn't receive keyboard input.","design":"**Design Decision**: `beads-form-mode` derives from `nil` (fundamental-mode), not `special-mode`.\n\n**Rationale**:\n- `special-mode` sets `buffer-read-only t`, which blocks editable-field and text widgets\n- Menu-choice widgets worked because they use overlays/keymaps, bypassing buffer modification\n- Emacs's built-in `Custom-mode` (cus-edit.el) uses the same pattern: `(define-derived-mode Custom-mode nil \"Custom\" ...)`\n- `special-mode` is designed for read-only display buffers (help, completion lists)\n- Widget-based editable forms should derive from `nil`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T18:31:20.351046+01:00","updated_at":"2025-12-17T18:31:24.350772+01:00","closed_at":"2025-12-17T18:31:24.350772+01:00","close_reason":"Fixed in commits c9da5d7 and 68313f8"}
{"id":"bdel-a1v","title":"Implement edit notes feature","description":"Add 'e n' keybinding to edit notes:\n- Same markdown-mode buffer pattern as description\n- C-c C-c commits via :notes field\n- Buffer name: *beads-edit: ISSUE-ID notes*","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T12:59:15.959924+01:00","updated_at":"2025-12-17T13:08:02.492684+01:00","closed_at":"2025-12-17T13:08:02.492684+01:00","close_reason":"Completed","dependencies":[{"issue_id":"bdel-a1v","depends_on_id":"bdel-ab3","type":"parent-child","created_at":"2025-12-17T12:59:45.257015+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-ab3","title":"Milestone 2: Editing tasks from list and detail view","description":"Enable editing of beads issues from within Emacs, with a rich editing experience for long-form text fields (description, design, acceptance criteria) and convenient completion-based editing for metadata fields.\n\nKey patterns to implement:\n- Dedicated edit buffers for long text (like org-src-mode) with C-c C-c to commit, C-c C-k to discard\n- completing-read for constrained fields (status, priority, type)\n- Minibuffer for simple text fields (title, assignee, external-ref)\n- Stretch: form-based UI like custom.el for metadata editing\n\nAll fields from `bd update` should be editable:\n- title, description, status, priority, type, assignee\n- design, acceptance (criteria), notes, external-ref, estimate\n- labels (add/remove/set)","design":"Research findings (org-src-mode pattern):\n1. Create dedicated buffer with buffer-local markers for source positions\n2. Store original content for abort comparison\n3. Use single code path with gate flag (org-src--allow-write-back pattern)\n4. Minor mode provides C-c C-c (commit) and C-c C-k (abort) bindings\n5. On commit: call beads-rpc-update with changed field\n6. On abort: just kill buffer, no RPC call\n\nFor long text fields: use markdown-mode in edit buffer\nFor metadata: completing-read or form UI","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-17T12:58:43.587904+01:00","updated_at":"2025-12-17T13:17:00.981304+01:00","closed_at":"2025-12-17T13:17:00.981304+01:00","close_reason":"All core editing features implemented: markdown buffers for long text, completing-read for constrained fields, minibuffer for text fields, and label management. Stretch goal (form-based editor) remains optional."}
{"id":"bdel-aw7","title":"Implement filter system","description":"Create beads-filter.el with composable higher-order filters. Filter by status, priority, type, assignee. Pipeline composition pattern. See docs/emacs-ui.md Section 5.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T08:06:09.823743+01:00","updated_at":"2025-12-17T11:33:46.401209+01:00","closed_at":"2025-12-17T11:33:46.401209+01:00","close_reason":"Completed","dependencies":[{"issue_id":"bdel-aw7","depends_on_id":"bdel-5w1","type":"parent-child","created_at":"2025-12-17T08:06:21.650688+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"bdel-aw7","depends_on_id":"bdel-dkc","type":"blocks","created_at":"2025-12-17T08:06:31.832389+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-b3t","title":"Project.el integration for per-project beads lists","description":"Add project.el integration so each project can have its own beads list buffer with a unique name.\n\nRequirements:\n1. New `beads-project.el` extension module\n2. Buffer name includes project identifier (root directory name)\n3. Multiple beads list buffers can coexist for different projects\n4. `beads-list` command should be project-aware when called from project context\n5. Optional: project.el integration for `project-switch-project` actions\n\nUse cases:\n- Working on multiple projects simultaneously\n- Switching between projects without losing beads list state\n- Each project's list buffer persists independently\n\nBuffer naming:\n- Current: `*Beads Issues*`\n- With project: `*Beads Issues: project-name*` or `*Beads: ~/code/myproject*`","design":"Implementation plan:\n\n## 1. Create `beads-project.el`\n\n```elisp\n(require 'project)\n\n(defcustom beads-project-buffer-name-function\n  #'beads-project-default-buffer-name\n  \"Function to generate buffer name for project beads list.\nCalled with project root path, returns buffer name string.\"\n  :type 'function\n  :group 'beads)\n\n(defun beads-project-root ()\n  \"Get current project root, or nil if not in a project.\"\n  (when-let ((proj (project-current)))\n    (project-root proj)))\n\n(defun beads-project-name (root)\n  \"Extract project name from ROOT path.\"\n  (file-name-nondirectory (directory-file-name root)))\n\n(defun beads-project-default-buffer-name (root)\n  \"Generate default buffer name for project at ROOT.\"\n  (format \"*Beads: %s*\" (beads-project-name root)))\n\n(defun beads-project-list ()\n  \"Open beads list for current project.\"\n  (interactive)\n  (if-let ((root (beads-project-root)))\n      (let ((default-directory root))\n        (beads-list))\n    (beads-list)))\n```\n\n## 2. Update `beads-list` to use project-aware buffer name\n\n```elisp\n(defun beads-list ()\n  \"Open the Beads issue list buffer.\"\n  (interactive)\n  (let* ((root (and (featurep 'beads-project)\n                    (beads-project-root)))\n         (buffer-name (if root\n                          (funcall beads-project-buffer-name-function root)\n                        \"*Beads Issues*\"))\n         (buffer (get-buffer-create buffer-name)))\n    ...))\n```\n\n## 3. Optional: Add to project.el switch actions\n\n```elisp\n(defun beads-project-switch-action ()\n  \"Switch action to open beads list in project.\"\n  (beads-project-list))\n\n;; Add to project-switch-commands\n(add-to-list 'project-switch-commands\n             '(beads-project-list \"Beads issues\"))\n```\n\n## 4. Store project root in buffer-local variable\n\n```elisp\n(defvar-local beads-list--project-root nil\n  \"Project root for this beads list buffer.\")\n```\n\nThis ensures refresh uses the correct project context.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T13:52:42.046797+01:00","updated_at":"2025-12-17T14:06:10.320361+01:00","closed_at":"2025-12-17T14:06:10.320361+01:00","close_reason":"Implemented: beads-project.el with per-project buffer names, project-switch-commands integration, customizable buffer naming, and README.org documentation"}
{"id":"bdel-b42","title":"Dependency graph visualization (bd graph)","description":"ASCII dependency graph showing execution order. For epics shows all children and dependencies. Leftmost nodes have no dependencies (can start immediately), rightmost depend on everything to their left. Visualizes critical path and parallel work opportunities.\n\nUse case: Quickly understand task dependencies, identify parallel work opportunities, and visualize the critical path for complex epics or workflows.","design":"Implementation plan for Emacs UI:\n\n1. Module structure:\n   - Add beads-graph.el (new file) or extend beads-hierarchy.el\n   - beads-graph-mode derived from special-mode with custom keymap\n\n2. Core functionality:\n   - beads-graph command: Interactive command to display graph for issue at point or prompt for ID\n   - Call bd graph \u003cissue-id\u003e CLI command\n   - Parse ASCII output and convert ANSI color codes to Emacs faces\n   \n3. Display and UI:\n   - Status colors mapping:\n     * white/default = open\n     * yellow = in_progress\n     * red = blocked\n     * green = closed\n   - Make issue IDs clickable/navigable (text properties with beads-show action)\n   - Header showing root issue details\n   \n4. Keybindings (beads-graph-mode-map):\n   - RET: beads-show issue at point\n   - g: refresh graph\n   - q: quit-window\n   - G: (from detail/list views) show graph for current issue\n   \n5. Integration points:\n   - Add G key binding to beads-detail-mode-map\n   - Add G key binding to beads-list-mode-map (use issue at point)\n   - Add graph command to transient menus (beads-dispatch, beads-detail-dispatch)\n   \n6. CLI integration:\n   - Primary: bd graph \u003cissue-id\u003e (parse ASCII output)\n   - Fallback: Check if --json format available in future beads versions\n   - Handle errors gracefully (no graph available, invalid ID, etc.)\n   \n7. Future enhancements:\n   - Filter by status\n   - Expand/collapse subtrees\n   - Export graph\n   - Integration with org-mode","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-06T21:10:24.748984+01:00","created_by":"ctm","updated_at":"2026-01-06T21:11:11.164795+01:00"}
{"id":"bdel-bjd","title":"Test issue for suggest-next","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-06T08:08:34.517943+01:00","created_by":"ctm","updated_at":"2026-01-06T08:08:40.667097+01:00","closed_at":"2026-01-06T08:08:40.667097+01:00","close_reason":"Testing suggest-next"}
{"id":"bdel-bqy","title":"Show dependencies/dependents in detail view","description":"Display dependencies (blockers) and dependents (blocked by) in the detail buffer with interactive navigation.\n\n## Requirements\n- Show \"Dependencies:\" section listing issues this depends on\n- Show \"Dependents:\" section listing issues that depend on this\n- Each entry should be a clickable button (RET navigates to that issue)\n- Similar to how labels are displayed but for dependencies\n\n## Data source\n`bd show` returns:\n- `dependencies` array with issue objects this depends on\n- `dependents` array with issue objects that depend on this","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T15:12:50.749813+01:00","created_by":"ctm","updated_at":"2026-01-08T20:30:41.907831+01:00","closed_at":"2026-01-08T20:30:41.907831+01:00","close_reason":"Implemented in c524148"}
{"id":"bdel-bum","title":"Implement edit description feature","description":"Add 'e d' keybinding in detail view to edit description:\n- Opens dedicated buffer in markdown-mode\n- Pre-populates with current description (or empty)\n- C-c C-c commits via beads-rpc-update with :description\n- C-c C-k discards\n- Buffer name: *beads-edit: ISSUE-ID description*\n- Refresh detail view after successful commit","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T12:59:14.695125+01:00","updated_at":"2025-12-17T13:08:01.906545+01:00","closed_at":"2025-12-17T13:08:01.906545+01:00","close_reason":"Completed","dependencies":[{"issue_id":"bdel-bum","depends_on_id":"bdel-ab3","type":"parent-child","created_at":"2025-12-17T12:59:36.894485+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"bdel-bum","depends_on_id":"bdel-ohr","type":"blocks","created_at":"2025-12-17T12:59:51.028465+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-bwj","title":"Add vui edit affordances to detail view","description":"Add inline edit buttons/actions to detail view using vui components that trigger edit workflows.","status":"open","priority":2,"issue_type":"task","owner":"noreply@anthropic.com","created_at":"2026-01-14T22:31:58.692368+01:00","created_by":"Christian Tietze","updated_at":"2026-01-14T22:31:58.692368+01:00","dependencies":[{"issue_id":"bdel-bwj","depends_on_id":"bdel-ssf","type":"blocks","created_at":"2026-01-14T22:32:32.466981+01:00","created_by":"Christian Tietze"}]}
{"id":"bdel-byj","title":"(Stretch) Form-based metadata editor","description":"Create a custom.el-style form buffer for editing all metadata at once:\n- Display all editable fields in a widget-based form\n- Dropdown/choice widgets for status, priority, type\n- Text fields for title, assignee, external-ref\n- Multi-line text areas for description, design, acceptance, notes\n- Labels as editable list\n- Submit button or C-c C-c to commit all changes\n- Cancel button or C-c C-k to discard\n\nThis is a stretch goal - the individual field editors provide the core functionality.","design":"Use widget.el library (what custom.el uses):\n- widget-create for form fields\n- widget-value to read values\n- widget-setup for buffer initialization\nConsider ewoc.el for list management (labels)","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-17T12:59:16.2794+01:00","updated_at":"2025-12-17T13:38:00.359531+01:00","closed_at":"2025-12-17T13:38:00.359531+01:00","close_reason":"Implemented widget-based form editor with all metadata fields, C-c C-c/C-c C-k keybindings, and 'E' shortcut from detail view","dependencies":[{"issue_id":"bdel-byj","depends_on_id":"bdel-ab3","type":"parent-child","created_at":"2025-12-17T12:59:45.420843+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-c0n","title":"Implement filter by status","description":"Add functionality to filter the issue list by status (open, in_progress, blocked, closed). Currently shows \"Filter by status not yet implemented\" message in beads-transient.el.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T14:11:19.312379+01:00","updated_at":"2025-12-17T14:41:46.890994+01:00","closed_at":"2025-12-17T14:41:46.890994+01:00","close_reason":"Implemented: completing-read for status, filters list, shows filter name in refresh message"}
{"id":"bdel-c5c","title":"Dependencies management","description":"Add UI for managing issue dependencies. Beads supports dependencies (blocks, related, parent-child, discovered-from). RPC already exists for dep_add, dep_remove, dep_tree.","design":"**Scope reduced**: Focus on viewing only, editing dependencies is low priority.\n\n**View-only approach:**\n- Display dependencies in detail view (already shows dependency_count)\n- Add 'H' binding from detail view to open hierarchy explorer in horizontal split\n- Use Emacs hierarchy.el or similar for tree visualization\n- Show: blocked by (issues blocking this), blocks (issues this blocks), related\n\n**Not in scope:**\n- Adding/removing dependencies via UI (use CLI: `bd dep add/remove`)\n- Inline editing of dependency relationships\n\n**Technical notes:**\n- RPC exists: dep_tree returns full dependency graph\n- Could use `hierarchy.el` package for tree rendering\n- Split window to right of detail pane","status":"open","priority":4,"issue_type":"epic","created_at":"2025-12-17T19:22:31.864537+01:00","updated_at":"2025-12-17T21:08:50.563344+01:00"}
{"id":"bdel-cq9","title":"Create beads-vui.el foundation module","description":"Create beads-vui.el with common components, context providers, and shared state management for vui-based views.","status":"in_progress","priority":2,"issue_type":"task","owner":"noreply@anthropic.com","created_at":"2026-01-14T22:31:50.258049+01:00","created_by":"Christian Tietze","updated_at":"2026-01-15T05:43:09.315354+01:00","dependencies":[{"issue_id":"bdel-cq9","depends_on_id":"bdel-6dn","type":"blocks","created_at":"2026-01-14T22:32:31.739748+01:00","created_by":"Christian Tietze"}]}
{"id":"bdel-cqp","title":"Implement create issue command","description":"Add functionality to create new issues from within beads.el. Currently shows \"Create issue not yet implemented\" message in beads-transient.el.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T14:11:19.050639+01:00","updated_at":"2025-12-17T14:37:56.540081+01:00","closed_at":"2025-12-17T14:37:56.540081+01:00","close_reason":"Implemented: prompts for title, type, priority; creates via RPC; refreshes list"}
{"id":"bdel-cud","title":"Implement vui form field components","description":"Create vui field, select, and text-area wrappers for the form editor with proper styling and keybindings.","status":"open","priority":2,"issue_type":"task","owner":"noreply@anthropic.com","created_at":"2026-01-14T22:31:56.163682+01:00","created_by":"Christian Tietze","updated_at":"2026-01-14T22:31:56.163682+01:00","dependencies":[{"issue_id":"bdel-cud","depends_on_id":"bdel-cq9","type":"blocks","created_at":"2026-01-14T22:32:32.335825+01:00","created_by":"Christian Tietze"}]}
{"id":"bdel-d29","title":"Implement edit priority with completing-read","description":"Add 'e p' keybinding to change priority:\n- Use completing-read with options: P0 (critical), P1 (high), P2 (normal), P3 (low), P4 (lowest)\n- Show current priority as default\n- Convert selection to integer for RPC\n- Commit via beads-rpc-update with :priority","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T12:59:15.380685+01:00","updated_at":"2025-12-17T13:08:03.04369+01:00","closed_at":"2025-12-17T13:08:03.04369+01:00","close_reason":"Completed","dependencies":[{"issue_id":"bdel-d29","depends_on_id":"bdel-ab3","type":"parent-child","created_at":"2025-12-17T12:59:37.41087+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-d90","title":"Add proper GPL preamble to all .el files","description":"All .el files should have the standard GNU GPL preamble in the header comments, matching the project's LICENSE file.","design":"## Required Header Format\n\nEach .el file should have this preamble after the first line:\n\n```elisp\n;;; filename.el --- Description  -*- lexical-binding: t; -*-\n\n;; Copyright (C) 2025  Christian Tietze\n\n;; Author: Christian Tietze\n;; Keywords: tools\n\n;; This program is free software; you can redistribute it and/or modify\n;; it under the terms of the GNU General Public License as published by\n;; the Free Software Foundation, either version 3 of the License, or\n;; (at your option) any later version.\n\n;; This program is distributed in the hope that it will be useful,\n;; but WITHOUT ANY WARRANTY; without even the implied warranty of\n;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n;; GNU General Public License for more details.\n\n;; You should have received a copy of the GNU General Public License\n;; along with this program.  If not, see \u003chttps://www.gnu.org/licenses/\u003e.\n\n;;; Commentary:\n\n;; Brief description of module purpose.\n\n;;; Code:\n```\n\nMake sure to change the keywords to match the intent of the file.\n\n## Files to Update\n\nAll files in `lisp/`:\n- beads.el (main file, already has partial header)\n- beads-autoupdate.el\n- beads-detail.el\n- beads-edit.el\n- beads-filter.el\n- beads-form.el\n- beads-hierarchy.el\n- beads-list.el\n- beads-preview.el\n- beads-project.el\n- beads-rpc.el\n- beads-state.el\n- beads-transient.el\n\n## Notes\n\n- Main file (beads.el) should also have Version, Package-Requires, URL\n- Sub-modules only need basic preamble (no Package-Requires)\n- Keywords should be appropriate per file (tools, project, etc.)\n- Reference: casual-dired.el header style","notes":"In the commentary, be helpful. This is meant to be read by people\ninterested in the package, so try to help them.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-21T07:02:21.364464+01:00","updated_at":"2025-12-23T06:02:35.285925+01:00","closed_at":"2025-12-21T07:21:53.288087+01:00","close_reason":"Added GPL v3 preamble to all 13 .el files"}
{"id":"bdel-deb","title":"Implement vui relationships component","description":"Create vui component displaying dependencies and dependents with clickable navigation buttons.","status":"open","priority":2,"issue_type":"task","owner":"noreply@anthropic.com","created_at":"2026-01-14T22:31:53.475694+01:00","created_by":"Christian Tietze","updated_at":"2026-01-14T22:31:53.475694+01:00","dependencies":[{"issue_id":"bdel-deb","depends_on_id":"bdel-cq9","type":"blocks","created_at":"2026-01-14T22:32:31.942007+01:00","created_by":"Christian Tietze"}]}
{"id":"bdel-df8","title":"Additional list filters and views","description":"Extend list view with more filtering and view options beyond status/priority.","design":"**Currently implemented:** Filter by status (f s), filter by priority (f p)\n\n**Nested Transient Approach:**\nA transient prefix bound as a suffix replaces the current transient. Pressing C-g returns to parent.\n\n**Structure:**\n```\nbeads-list-menu (main, ?)\n├── Navigation: g, P\n├── Actions: c, E, x, R, D\n├── Filter → beads-filter-menu (nested prefix, f)\n│   ├── s - By status\n│   ├── p - By priority  \n│   ├── t - By type\n│   ├── a - By assignee\n│   ├── l - By label\n│   ├── r - Ready only (no blockers)\n│   ├── b - Blocked only\n│   └── c - Clear all filters\n└── Help: ?, q\n```\n\n**Implementation:**\n1. Create `beads-filter-menu` as `transient-define-prefix`\n2. Add filter commands: `beads-filter-type`, `beads-filter-assignee`, `beads-filter-label`, `beads-filter-ready`, `beads-filter-blocked`, `beads-filter-clear`\n3. Replace current \"Filter\" group in `beads-list-menu` with single entry pointing to `beads-filter-menu`\n4. Direct `f` keymap binding still works for quick access\n\n**Filter functions need:**\n- Type filter: completing-read from '(\"bug\" \"feature\" \"task\" \"epic\" \"chore\")\n- Assignee: completing-read, may need to fetch list from existing issues\n- Label: completing-read, may need to fetch list from existing issues  \n- Ready: Use `beads-rpc-ready` or filter by dependency_count = 0\n- Blocked: Filter by status = \"blocked\"\n- Clear: Set `beads-list--filter` to nil\n\n**Note:** Ready/Blocked may need RPC support or client-side filtering based on blocked_by dependencies.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-17T19:22:32.01746+01:00","updated_at":"2025-12-17T21:38:12.823052+01:00","closed_at":"2025-12-17T21:38:12.823052+01:00","close_reason":"Implemented nested filter menu with type, assignee, label, ready, blocked, and clear filters"}
{"id":"bdel-dkc","title":"Implement state management","description":"Create beads-state.el with closure-based state manager for view mode, filters, and UI state. Lazy initialization pattern. See docs/emacs-ui.md Section 7.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T08:06:09.744782+01:00","updated_at":"2025-12-17T11:32:32.087389+01:00","closed_at":"2025-12-17T11:32:32.087389+01:00","close_reason":"Completed","dependencies":[{"issue_id":"bdel-dkc","depends_on_id":"bdel-5w1","type":"parent-child","created_at":"2025-12-17T08:06:21.592648+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-dq1","title":"Implement filter by priority","description":"Add functionality to filter the issue list by priority (P0-P4). Currently shows \"Filter by priority not yet implemented\" message in beads-transient.el.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T14:11:19.446423+01:00","updated_at":"2025-12-17T14:41:47.017222+01:00","closed_at":"2025-12-17T14:41:47.017222+01:00","close_reason":"Implemented: completing-read for priority P0-P4, filters list, shows filter name in refresh message"}
{"id":"bdel-dq6","title":"Stale issues view (bd stale)","description":"Show issues not updated in N days to help identify forgotten or abandoned work. Essential for weekly reviews to find issues that may have stalled or need attention. Similar to orphans view but focused on activity staleness rather than commit references.\n\n## Use Case\nWeekly review workflow to surface issues that may need:\n- Status updates\n- Re-prioritization\n- Closure (if no longer relevant)\n- Transfer to other developers\n- Investigation into why work has stalled\n\n## User Interface\n- Customizable staleness threshold (default 30 days)\n- Display: issue ID, title, status, last updated date, days since update\n- Filter by status: open vs in_progress vs all\n- Sorting options: by staleness (oldest first)\n- Interactive actions from the view\n\n## Integration\n- Add to transient menu under Navigation\n- Accessible via `M-x beads-stale`\n- Supports both daemon RPC and CLI fallback","design":"New `beads-stale.el` module similar to `beads-orphans.el`\n\n## Core Components\n\n### 1. Configuration\n- `beads-stale-days` (defcustom): Days threshold for staleness (default: 30)\n- `beads-stale-filter` (defcustom): Default status filter (\"all\", \"open\", \"in_progress\")\n\n### 2. Major Mode\n- `beads-stale-mode` derived from `special-mode`\n- Buffer name: `*beads-stale*`\n- Keybindings:\n  - RET: `beads-stale-show-detail` (view full issue detail)\n  - c: `beads-stale-claim` (set status to in_progress)\n  - g: `beads-stale-refresh` (reload view)\n  - f: `beads-stale-set-filter` (change status filter)\n  - d: `beads-stale-set-days` (change days threshold)\n  - q: `quit-window`\n\n### 3. Display Format\nTabulated list with columns:\n- ID (10 chars)\n- Title (40 chars, truncated)\n- Status (12 chars)\n- Last Updated (YYYY-MM-DD)\n- Days Ago (numeric, right-aligned)\n\nSort by: days_ago descending (stalest first)\n\n### 4. Data Retrieval\nBackend call: `bd stale --days N --json`\n\nRPC method if daemon available:\n```elisp\n(beads-rpc-call \"stale\" `((days . ,beads-stale-days)))\n```\n\nCLI fallback:\n```elisp\n(beads-cli-call \"stale\" \"--days\" (number-to-string days) \"--json\")\n```\n\n### 5. Transient Menu Integration\nIn `beads-transient.el`, add to Navigation section:\n```elisp\n[\"Navigation\"\n (\"l\" \"List issues\" beads-list)\n (\"r\" \"Ready to work\" beads-ready)\n (\"o\" \"Orphans\" beads-orphans)\n (\"a\" \"Aged/stale issues\" beads-stale)]  ;; NEW\n```\n\n### 6. Entry Point\n`M-x beads-stale` - Main command to show stale issues view\n\n## Implementation Order\n1. Create `beads-stale.el` with basic structure\n2. Implement RPC/CLI data fetching\n3. Create tabulated-list display\n4. Add keybindings and interactive commands\n5. Integrate into transient menu\n6. Add ERT tests in `test/beads-stale-test.el`","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-06T21:10:25.497635+01:00","created_by":"ctm","updated_at":"2026-01-06T21:27:34.843157+01:00","closed_at":"2026-01-06T21:27:34.843157+01:00","close_reason":"Implemented in commit d9bf7c3"}
{"id":"bdel-dyk","title":"Implement undo/redo for editing commands","description":"Add undo/redo capability for issue editing operations using the Command Pattern.\n\n## Research Findings\n\n**Emacs buffer-undo-list is NOT suitable** for this use case:\n- It's designed exclusively for buffer text changes\n- External state (database updates via RPC) cannot use it\n- No major Emacs packages (magit, org-mode, etc.) implement undo for external operations\n\n**Recommended approach: Command Pattern**\n- Store reverse operations as closures in a custom undo stack\n- Each edit captures: issue-id, field, old-value, new-value, timestamp\n- Undo pops from stack, calls RPC with old value, pushes to redo stack\n- Redo pops from redo stack, re-applies, pushes back to undo stack\n\n## Current Edit Flow (insertion points identified)\n\n```\nUser initiates edit\n    ↓\nbeads-edit-field() captures original content in beads-edit--original-content\n    ↓\nUser modifies content\n    ↓\nC-c C-c triggers beads-edit--exit()\n    ↓\n★ UNDO HOOK: Before beads-rpc-update() - have old+new values\n    ↓\nbeads-rpc-update(issue-id, field, new-value)\n    ↓\nbeads-detail-refresh() updates views\n```\n\n## Design Decisions\n\n1. **Scope**: Global undo stack (not per-buffer/per-issue) - simpler, more intuitive\n2. **Persistence**: Session-only (no disk persistence) - avoids complexity and stale state\n3. **Redo**: Yes, full undo/redo support\n4. **Stack size**: Configurable limit (default: 50 operations)\n5. **Form edits**: Single undo entry for all fields changed together\n6. **Conflicts**: Check issue still exists before undo, warn if externally modified\n\n## Keybindings\n\n- `u` - Undo last edit (detail and list modes)\n- `U` or `C-S-/` - Redo","design":"## Architecture\n\n### beads-undo.el module structure\n\n```elisp\n;; Undo entry structure\n(cl-defstruct beads-undo-entry\n  issue-id       ; string\n  field          ; keyword like :title, :description (or :batch for form edits)\n  old-value      ; value before edit\n  new-value      ; value after edit  \n  timestamp      ; when edit occurred\n  description)   ; human-readable description\n\n;; Stacks\n(defvar beads-undo--stack nil \"List of undo entries, most recent first.\")\n(defvar beads-undo--redo-stack nil \"List of redo entries.\")\n(defcustom beads-undo-limit 50 \"Maximum undo history size.\")\n\n;; Core API\n(defun beads-undo-record (issue-id field old-value new-value \u0026optional description)\n  \"Record an edit for undo. Clears redo stack.\")\n\n(defun beads-undo ()\n  \"Undo last edit. Moves entry to redo stack.\"\n  (interactive))\n\n(defun beads-redo ()\n  \"Redo last undone edit. Moves entry back to undo stack.\"\n  (interactive))\n```\n\n### Integration Points\n\n1. **beads-edit.el** - Wrap beads-edit--exit()\n2. **beads-detail.el** - Wrap inline edits (status, priority, type, labels)\n3. **beads-form.el** - Wrap form commit with batch entry\n4. **beads-list.el** - Wrap list-mode inline edits\n\n### Conflict Detection\n\nBefore applying undo:\n1. Fetch current issue via beads-rpc-show\n2. Compare current value with undo-entry's new-value\n3. If different: warn \"Issue was modified externally\"\n4. If issue deleted: error \"Issue no longer exists\"\n\n### Form Edit Batch Undo\n\nFor form edits changing multiple fields:\n- Store as single entry with :batch field type\n- old-value/new-value: alists of (field . val) pairs\n- Undo applies all fields at once","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-17T13:38:12.284551+01:00","updated_at":"2025-12-17T17:53:24.892646+01:00"}
{"id":"bdel-e7i","title":"Implement RPC layer for daemon communication","description":"Create beads-rpc.el with JSON-over-Unix-socket communication to the beads daemon. See docs/beads-client-howto.md for protocol details and docs/emacs-ui.md Section 1 for architecture.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T08:06:09.439311+01:00","updated_at":"2025-12-17T08:25:00.286253+01:00","closed_at":"2025-12-17T08:25:00.286253+01:00","close_reason":"Implemented beads-rpc.el with auto-discovery, daemon communication, high-level API functions, and comprehensive tests. Verified working with daemon.","dependencies":[{"issue_id":"bdel-e7i","depends_on_id":"bdel-5w1","type":"parent-child","created_at":"2025-12-17T08:06:21.414017+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"bdel-e7i","depends_on_id":"bdel-jlb","type":"blocks","created_at":"2025-12-17T08:11:42.943792+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-e9j","title":"Test issue 2 for suggest-next","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-06T08:08:47.915905+01:00","created_by":"ctm","updated_at":"2026-01-06T08:08:54.235471+01:00","closed_at":"2026-01-06T08:08:54.235471+01:00","close_reason":"Testing suggest-next"}
{"id":"bdel-eeq","title":"Test blocker parent","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-13T08:53:49.217785+01:00","created_by":"Christian Tietze","updated_at":"2026-01-13T08:54:19.627536+01:00","deleted_at":"2026-01-13T08:54:19.627536+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"bdel-efd","title":"Add hooked status support","description":"Add support for the new 'hooked' status from beads 0.41.0. Includes: face definition, format-status updates, choice list updates in form/list/detail/transient. Tests included.","status":"closed","priority":2,"issue_type":"chore","created_at":"2026-01-06T07:42:28.794109+01:00","created_by":"ctm","updated_at":"2026-01-06T07:54:30.324062+01:00","closed_at":"2026-01-06T07:54:30.324062+01:00","close_reason":"Implemented in commit fde3270","dependencies":[{"issue_id":"bdel-efd","depends_on_id":"bdel-wch","type":"parent-child","created_at":"2026-01-06T07:42:47.832176+01:00","created_by":"ctm"}]}
{"id":"bdel-eja","title":"Add conflict detection for undo operations","description":"Before applying undo, check for conflicts:\n\n1. Fetch current issue via beads-rpc-show\n2. Compare current field value with undo-entry's new-value\n3. If different: prompt \"Issue was modified externally. Undo anyway? (y/n)\"\n4. If issue deleted (RPC error): show \"Issue no longer exists\"\n5. If user confirms or no conflict: proceed with undo\n\nThis prevents silent data loss when issue was modified by another client or CLI.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-17T15:01:31.92797+01:00","updated_at":"2025-12-17T15:01:31.92797+01:00","dependencies":[{"issue_id":"bdel-eja","depends_on_id":"bdel-dyk","type":"parent-child","created_at":"2025-12-17T15:01:46.729896+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"bdel-eja","depends_on_id":"bdel-0kf","type":"blocks","created_at":"2025-12-17T15:01:59.552336+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-fcc","title":"Set up interactive testing infrastructure","description":"Create infrastructure for interactive Q\u0026A testing of the library.\n\nSet up a way to run Emacs from command line with minimal config that loads beads.el:\n- Use --init-directory to point to a test config directory\n- Create test/interactive/ or similar with init.el that loads the library\n- Add mise task like `mise run interactive` to launch it\n- Document the interactive testing workflow\n\nThis allows manual testing and experimentation without affecting user's Emacs config.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T08:53:52.049042+01:00","updated_at":"2025-12-17T08:57:16.549998+01:00","closed_at":"2025-12-17T08:57:16.549998+01:00","close_reason":"Added dev/init.el and mise run interactive task"}
{"id":"bdel-fhv","title":"Display created_by field in detail view","description":"Display the created_by field (from beads 0.38.0) in the issue detail view metadata section. Tests included.","status":"closed","priority":3,"issue_type":"chore","created_at":"2026-01-06T07:42:31.306501+01:00","created_by":"ctm","updated_at":"2026-01-06T08:04:50.97956+01:00","closed_at":"2026-01-06T08:04:50.97956+01:00","close_reason":"Implemented in commit 279655f","dependencies":[{"issue_id":"bdel-fhv","depends_on_id":"bdel-wch","type":"parent-child","created_at":"2026-01-06T07:42:47.937776+01:00","created_by":"ctm"}]}
{"id":"bdel-fiw","title":"Test duplicate","description":"Same content","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-07T06:54:54.485524+01:00","created_by":"ctm","updated_at":"2026-01-07T06:55:11.889476+01:00","deleted_at":"2026-01-07T06:55:11.889476+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"bdel-gkk","title":"Migrate beads-form.el to vui.el","description":"Replace widget.el form rendering with vui components. Implement change detection using vui state management.","status":"open","priority":2,"issue_type":"task","owner":"noreply@anthropic.com","created_at":"2026-01-14T22:31:57.113613+01:00","created_by":"Christian Tietze","updated_at":"2026-01-14T22:31:57.113613+01:00","dependencies":[{"issue_id":"bdel-gkk","depends_on_id":"bdel-cud","type":"blocks","created_at":"2026-01-14T22:32:32.399318+01:00","created_by":"Christian Tietze"}]}
{"id":"bdel-gww","title":"Dynamic title width in hierarchy view","description":"Currently hierarchy titles are hard-truncated at 40 characters. Should use available window width instead, adapting to the actual space available.","design":"**Current Implementation:**\n```elisp\n(insert (truncate-string-to-width title 40 nil nil \"…\"))\n```\n\n**Research Findings:**\n\n1. **`window-body-width`** - Returns usable text width of window\n   - Can be called at render time to get actual width\n   - Returns columns (character widths)\n\n2. **`truncate-string-to-width`** supports:\n   - `ELLIPSIS` param for custom ellipsis string (default \"…\")\n   - `ELLIPSIS-TEXT-PROPERTY` - uses `display` property instead of actual truncation\n     (visually truncates but keeps full string - interesting for tooltips)\n\n3. **Indentation consideration:**\n   - The `labelfn` receives `indent` parameter (currently ignored)\n   - Tree widgets add ~2-3 chars per level for expand/collapse icons\n   - Each indent level is typically 2 spaces\n\n**Proposed Implementation:**\n\n```elisp\n(defun beads-hierarchy--labelfn (issue indent)\n  \"Insert formatted ISSUE at INDENT level.\"\n  (let* ((id (alist-get 'id issue))\n         (title (alist-get 'title issue \"\"))\n         (status (alist-get 'status issue \"open\"))\n         ;; Calculate available width:\n         ;; window-width - indent - id-width - status-width - spacing\n         (id-width (+ 1 (length id)))        ; \" bdel-xxx\"\n         (status-width (+ 3 (length status))) ; \" [status]\"\n         (indent-width (* indent 2))          ; hierarchy indentation\n         (widget-width 3)                     ; tree widget icon\n         (available (- (window-body-width) \n                       indent-width widget-width \n                       id-width status-width 4)))\n    (insert \" \")\n    (insert (propertize id 'face 'beads-detail-id-face))\n    (insert \" \")\n    (insert (truncate-string-to-width title (max 10 available) nil nil \"…\"))\n    (insert \" \")\n    (insert (propertize (format \"[%s]\" status)\n                        'face (beads-hierarchy--status-face status)))))\n```\n\n**Edge Cases:**\n- Very narrow windows: use minimum width (10 chars)\n- Window resize: content won't auto-update (acceptable, user can refresh)\n\n**Alternative: Right-aligned status**\nCould use `display` property with `:align-to` to right-align status at window edge, giving title maximum space. More complex but cleaner look.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-18T07:38:07.400491+01:00","updated_at":"2025-12-19T09:36:09.660517+01:00","closed_at":"2025-12-19T09:36:09.660517+01:00","close_reason":"Implemented using window-body-width to calculate available title space dynamically"}
{"id":"bdel-hfe","title":"Fix TAB navigation in hierarchy view","description":"TAB/S-TAB to navigate between widgets only works when point is already on a widget. If you use arrow keys to move into empty indentation space, TAB does nothing.","design":"**Root Cause:**\n`beads-hierarchy-mode` derives from `special-mode`. The `widget-keymap` with TAB→`widget-forward` is only active on widget overlays, not buffer-wide. Empty space between widgets has no overlay, so TAB falls back to the major mode map which has no TAB binding.\n\n**Simple Fix (Phase 1):**\nAdd TAB and S-TAB bindings directly to `beads-hierarchy-mode-map`:\n\n```elisp\n(defvar beads-hierarchy-mode-map\n  (let ((map (make-sparse-keymap)))\n    (define-key map (kbd \"q\") #'quit-window)\n    (define-key map (kbd \"g\") #'beads-hierarchy-refresh)\n    (define-key map (kbd \"RET\") #'beads-hierarchy-goto-issue)\n    (define-key map (kbd \"TAB\") #'widget-forward)\n    (define-key map (kbd \"\u003cbacktab\u003e\") #'widget-backward)\n    map))\n```\n\nThis makes TAB work from anywhere in the buffer.\n\n**Alternative Considered:**\nSetting `(set-keymap-parent map widget-keymap)` - but this might conflict with special-mode bindings.\n\n**Future Enhancement (Phase 2):**\nMake TAB cycle through both widgets (fold/unfold) AND issue links (titles). This would require a custom navigation function:\n\n```elisp\n(defun beads-hierarchy-next-interactable ()\n  \"Move to next widget or issue link.\"\n  ;; Find next widget OR next issue ID link\n  ;; Interactables: tree widgets, issue ID/title text\n  )\n```\n\nThis fits hierarchy.el's design since the package is display-focused; navigation customization is left to the consuming mode.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-18T07:28:46.831749+01:00","updated_at":"2025-12-18T07:32:24.414536+01:00","closed_at":"2025-12-18T07:32:24.414536+01:00","close_reason":"Added TAB and backtab bindings to hierarchy mode map"}
{"id":"bdel-ijt","title":"Implement detail view mode","description":"Create beads-detail.el for formatted issue display. Show full issue details with faces for visual hierarchy. Accessible via RET from list. See docs/emacs-ui.md Section 4.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T08:06:09.586503+01:00","updated_at":"2025-12-17T09:06:58.966727+01:00","closed_at":"2025-12-17T09:06:58.966727+01:00","close_reason":"Implemented beads-detail.el with formatted display, faces, side-window, and list integration","dependencies":[{"issue_id":"bdel-ijt","depends_on_id":"bdel-5w1","type":"parent-child","created_at":"2025-12-17T08:06:21.498122+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"bdel-ijt","depends_on_id":"bdel-e7i","type":"blocks","created_at":"2025-12-17T08:06:31.756501+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-irl","title":"Add delete issue command","description":"Add command to delete issues from list and detail views. RPC already exists (beads-rpc-delete). Should prompt for confirmation.","design":"**Behavior:**\n- Binding: 'D' in list and detail views\n- Prompt with `yes-or-no-p`: \"Permanently delete issue bdel-xxx? \"\n- On confirm: call `beads-rpc-delete`, refresh view, show message\n- No undo available - deletion is permanent\n\n**CLI equivalent:** `bd delete \u003cid\u003e`\n\n**RPC:** `beads-rpc-delete` already exists, accepts list of IDs\n\n**Edge cases:**\n- Issue has dependents: warn user or let daemon handle\n- Issue is epic with children: warn about orphaning children","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-17T19:22:18.495051+01:00","updated_at":"2025-12-17T21:15:59.081221+01:00","closed_at":"2025-12-17T21:15:59.081221+01:00","close_reason":"Implemented with D keybinding and yes-or-no-p confirmation"}
{"id":"bdel-jlb","title":"Set up Emacs Lisp development tooling (syntax checking, testing, mise tasks)","description":"Set up development infrastructure before implementing RPC layer:\n- Configure mise tasks for build/test/lint\n- Set up elisp syntax checking (check-parens, byte-compilation)\n- Create test framework setup\n- Document in CLAUDE.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T08:11:35.432695+01:00","updated_at":"2025-12-17T08:15:57.053017+01:00","closed_at":"2025-12-17T08:15:57.053017+01:00","close_reason":"Tooling setup complete: mise tasks for lint/test/build/check, Python scripts, ERT test framework, CLAUDE.md updated"}
{"id":"bdel-joa","title":"Mark issue as duplicate from detail view","description":"Quick action to mark the current issue as a duplicate of a canonical issue without switching context. When triaging issues, users often discover duplicates and need to link them immediately. The duplicate is automatically closed with a reference to the canonical.\n\nUse case:\n- User is viewing an issue in detail view and realizes it's a duplicate\n- User invokes the mark-as-duplicate action\n- System prompts for the canonical issue ID with completion\n- Current issue is marked as duplicate and closed\n- Detail view refreshes showing the closed status and duplicate link","design":"Implementation plan for Emacs UI:\n\nComponent Integration:\n- Add  command in \n- Add  command in  for quick triage\n- Both commands share common logic via helper function in \n\nUser Interface:\n- Detail view keybinding:  (or  if conflicts with delete)\n- List view keybinding:  at point\n- Add to detail transient menu under Actions section\n- Prompt for canonical issue ID with completion showing open issues\n\nBackend Communication:\n- CLI call: `bd duplicate \u003ccurrent-id\u003e --of \u003ccanonical-id\u003e`\n- Check if daemon supports duplicate operation, otherwise use CLI fallback\n- May need to check beads CLI version for duplicate command support\n\nUser Feedback:\n- After marking: show message \"Marked bdel-xyz as duplicate of bdel-abc\"\n- Automatically refresh detail view to show closed status\n- In list view, refresh the list to show updated status\n\nCompletion System:\n- Use `completing-read` with issue ID + title\n- Fetch open issues only (exclude closed)\n- Format: \"bdel-abc: Issue title here\"\n- Parse selected value to extract ID\n\nError Handling:\n- Validate canonical issue exists and is open\n- Handle case where user tries to mark issue as duplicate of itself\n- Show error if CLI command fails","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-06T21:10:26.647552+01:00","created_by":"ctm","updated_at":"2026-01-06T21:11:01.043594+01:00"}
{"id":"bdel-k07","title":"Enhanced TAB navigation in hierarchy (widgets + titles)","description":"Make TAB cycle through all interactable elements: tree widgets (fold/unfold) AND issue titles (open detail view).","design":"**Current State (after bdel-hfe):**\nTAB navigates between tree widgets only (fold/unfold controls).\n\n**Desired Behavior:**\nTAB cycles through ALL interactable elements in order:\n1. Tree widget (▶/▼) - RET toggles fold\n2. Issue title/ID - RET opens detail view\n3. Next tree widget\n4. Next issue title/ID\n...and so on.\n\nS-TAB goes in reverse.\n\n**Implementation Approach:**\n\n```elisp\n(defun beads-hierarchy-next-interactable (\u0026optional backward)\n  \"Move to next interactable element.\nInteractables are: tree widgets, issue IDs/titles.\"\n  (interactive)\n  (let ((pos (point))\n        (found nil))\n    ;; Collect all interactable positions:\n    ;; - widget-at positions (tree controls)\n    ;; - text with 'beads-issue-id property (issue links)\n    ;; Navigate to next one in buffer order\n    ))\n```\n\n**Alternative: Button-based approach**\nUse `make-text-button` on issue IDs during rendering so `widget-forward` naturally includes them. This would be cleaner but requires changes to `beads-hierarchy--labelfn`.\n\n**Design Fit:**\nThis extends hierarchy.el appropriately - the package provides tree display, we add navigation suited to our content (issues with actionable IDs).","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-18T07:29:01.445486+01:00","updated_at":"2025-12-19T09:40:05.649928+01:00","closed_at":"2025-12-19T09:40:05.649928+01:00","close_reason":"TAB now navigates both tree widgets and issue ID buttons","dependencies":[{"issue_id":"bdel-k07","depends_on_id":"bdel-hfe","type":"blocks","created_at":"2025-12-18T07:29:01.446278+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-k7e","title":"Activity feed view (bd activity)","description":"Real-time mutation stream showing issue creates, updates, deletes, and comments as they happen. Provides visibility into workflow progress for monitoring team activity, tracking changes to specific issues, and understanding project pulse.\n\nUse cases:\n- Monitor team activity across all issues\n- Track changes to specific issues of interest\n- Understand project pulse and workflow velocity\n- Debug issue lifecycle and state transitions","design":"Implementation details for Emacs UI:\n\n# Module Structure\n- New beads-activity.el module\n- beads-activity-mode derived from special-mode\n- Integration with existing beads-transient menu\n\n# Display Modes\n1. Historical mode: Show last N events (default 50)\n2. Live mode: Polling with timer (default 5s interval)\n\n# Event Visualization\nEvent symbols:\n- + Issue created\n- → Status changed to in_progress\n- ✓ Status changed to completed\n- ✗ Status changed to failed\n- ⊘ Issue deleted\n- 💬 Comment added\n\nColor coding:\n- Green for completed/success events\n- Yellow for in_progress/pending\n- Red for failed/blocked/deleted\n- Blue for created\n- Gray for comments\n\n# Filtering\nFilter options:\n- By molecule/issue prefix (e.g., bdel-)\n- By event type (create/update/delete/comment)\n- By time range (last hour/day/week)\n- By actor (who made the change)\n\n# Keybindings\n- f: toggle follow mode (auto-scroll with new events)\n- F: filter menu (transient)\n- g: refresh/reload\n- RET: jump to issue\n- q: quit buffer\n\n# Implementation Details\n- Auto-scroll when in follow mode (move point to end)\n- Use run-with-timer for polling in follow mode\n- CLI calls: bd activity --json and bd activity --follow --json\n- Parse JSON stream and format for display\n- Add Activity feed option to beads-transient menu\n\n# Future Enhancements\n- Notification support for important events\n- Export activity log to file\n- Integration with org-mode agenda","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-06T21:10:24.905282+01:00","created_by":"ctm","updated_at":"2026-01-06T21:37:45.568506+01:00","closed_at":"2026-01-06T21:37:45.568506+01:00","close_reason":"Implemented in commit d217e99","comments":[{"id":3,"issue_id":"bdel-k7e","author":"ctm","text":"Event visualization should be configurable, with an alist for example that maps the status to a glyph, so that we can ship with plain ASCII characters as well as Unicode glyphs","created_at":"2026-01-06T20:16:02Z"},{"id":4,"issue_id":"bdel-k7e","author":"ctm","text":"Re: Notification support. Interesting follow up feature; track that as a low priority task depending on this one! Also, a prerequisite would be to filter by 'important' events, the notifications can poll for updates to the filtered results. ","created_at":"2026-01-06T20:17:19Z"},{"id":5,"issue_id":"bdel-k7e","author":"ctm","text":"declare faces for the color coding instead of hard-coding/inlining the colors","created_at":"2026-01-06T20:17:56Z"}]}
{"id":"bdel-kcq","title":"Support custom issue types (beads 0.46)","description":"Beads 0.46 added support for project-configured custom issue types beyond the built-in options (task, bug, feature, epic, chore, gate, convoy, agent, role, rig). Custom types persist across sync and export. beads.el should gracefully handle unknown types in the UI.","design":"## Current Behavior\n- `beads--format-type` has hardcoded type names and faces\n- Filter by type uses hardcoded list of types\n- Form editor type dropdown uses hardcoded list\n\n## Required Changes\n\n### List View\n- Unknown types should display with default face (no error)\n- Consider fetching available types from project config or inferring from issue data\n\n### Filter Menu  \n- `beads-filter-type` should dynamically build type list from:\n  1. Built-in types (task, bug, feature, epic, chore, gate, convoy, agent, role, rig)\n  2. Types present in current issue list (covers custom types in use)\n\n### Form Editor\n- Type dropdown should include custom types from current project\n- May need RPC call to get project config, or infer from existing issues\n\n### Graceful Fallback\n- Any unknown type should render without error\n- Use default face, no glyph for unknown types","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T06:42:59.37734+01:00","created_by":"ctm","updated_at":"2026-01-08T13:23:58.143035+01:00","closed_at":"2026-01-08T13:23:58.143035+01:00","close_reason":"Closed"}
{"id":"bdel-kfn","title":"Add new issue types (gate, convoy, agent, role)","description":"Add support for new issue types from beads 0.36-0.42: gate (async coordination), convoy (reactive completion), agent/role (agent tracking). Update type choice lists. Tests included.","status":"closed","priority":2,"issue_type":"chore","created_at":"2026-01-06T07:42:29.850304+01:00","created_by":"ctm","updated_at":"2026-01-06T08:02:50.088101+01:00","closed_at":"2026-01-06T08:02:50.088101+01:00","close_reason":"Implemented in commit 8a214c4","dependencies":[{"issue_id":"bdel-kfn","depends_on_id":"bdel-wch","type":"parent-child","created_at":"2026-01-06T07:42:47.883756+01:00","created_by":"ctm"}]}
{"id":"bdel-kh6","title":"Test blocker child","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-13T08:53:54.068046+01:00","created_by":"Christian Tietze","updated_at":"2026-01-13T08:54:19.627536+01:00","close_reason":"Closed","deleted_at":"2026-01-13T08:54:19.627536+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"bdel-kv2","title":"UI affordances for v0.44 features","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-06T17:09:27.779815+01:00","created_by":"ctm","updated_at":"2026-01-06T17:19:38.735216+01:00","closed_at":"2026-01-06T17:19:38.735216+01:00","close_reason":"All UI affordances implemented"}
{"id":"bdel-lo4","title":"Implement edit acceptance criteria feature","description":"Add 'e a' keybinding to edit acceptance criteria:\n- Same pattern as description editing\n- Opens markdown-mode buffer\n- C-c C-c commits via :acceptance-criteria field\n- Buffer name: *beads-edit: ISSUE-ID acceptance*","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T12:59:14.953621+01:00","updated_at":"2025-12-17T13:08:02.294863+01:00","closed_at":"2025-12-17T13:08:02.294863+01:00","close_reason":"Completed","dependencies":[{"issue_id":"bdel-lo4","depends_on_id":"bdel-ab3","type":"parent-child","created_at":"2025-12-17T12:59:37.06981+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-m6t","title":"Add search command","description":"Add interactive search command. The list RPC already supports title_contains and description_contains filters. Prompt for search query, show results in list view.","design":"**Behavior:**\n- Binding: '/' or 's' in list view\n- Prompt: \"Search issues: \"\n- Search across title and description (case-insensitive)\n- Show results in list view with filter indicator\n\n**CLI equivalent:** `bd search \"query\" --status open`\n\n**RPC approach:**\nUse `beads-rpc-list` with filters:\n- `title_contains`: search query\n- `description_contains`: search query\n- Combine with OR logic if possible, or search title first\n\n**UI flow:**\n1. Prompt for search query\n2. Set `beads-list--filter` to search predicate\n3. Refresh list view\n4. Show \"Search: query\" in mode line or header","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T19:22:18.96414+01:00","updated_at":"2025-12-17T21:57:51.179374+01:00","closed_at":"2025-12-17T21:57:51.179374+01:00","close_reason":"Implemented search via '/' keybinding - searches title and description case-insensitively"}
{"id":"bdel-mp1","title":"Implement vui content sections component","description":"Create vui component for rendering description, design notes, acceptance criteria with markdown support and section headers.","status":"open","priority":2,"issue_type":"task","owner":"noreply@anthropic.com","created_at":"2026-01-14T22:31:51.937841+01:00","created_by":"Christian Tietze","updated_at":"2026-01-14T22:31:51.937841+01:00","dependencies":[{"issue_id":"bdel-mp1","depends_on_id":"bdel-cq9","type":"blocks","created_at":"2026-01-14T22:32:31.872677+01:00","created_by":"Christian Tietze"}]}
{"id":"bdel-nde","title":"Create main entry point and autoloads","description":"Create beads.el as main entry point with autoloads, provide beads feature, and M-x beads command to launch the interface.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T08:06:09.98446+01:00","updated_at":"2025-12-17T09:11:49.517586+01:00","closed_at":"2025-12-17T09:11:49.517586+01:00","close_reason":"Created beads.el with package header, autoloads, and M-x beads command","dependencies":[{"issue_id":"bdel-nde","depends_on_id":"bdel-5w1","type":"parent-child","created_at":"2025-12-17T08:06:21.777537+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"bdel-nde","depends_on_id":"bdel-ppm","type":"blocks","created_at":"2025-12-17T08:06:31.913243+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-ohr","title":"Create beads-edit.el infrastructure","description":"Create the base editing infrastructure module with:\n- `beads-edit-mode` minor mode for dedicated edit buffers\n- Buffer-local variables: issue-id, field-name, original-content, allow-write-back\n- `beads-edit-commit` (C-c C-c) - saves changes via RPC, kills buffer\n- `beads-edit-abort` (C-c C-k) - discards changes, kills buffer\n- `beads-edit--create-buffer` helper to set up edit buffer with proper state\n- Hook into appropriate major mode (markdown-mode for text fields)","design":"Follow org-src-mode patterns:\n- Single code path for exit with gate flag\n- Buffer-local state, not global\n- Restore window configuration on exit\n- Optional: overlay on source buffer to show \"editing in progress\"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T12:59:14.571781+01:00","updated_at":"2025-12-17T13:05:14.031982+01:00","closed_at":"2025-12-17T13:05:14.031982+01:00","close_reason":"Completed","dependencies":[{"issue_id":"bdel-ohr","depends_on_id":"bdel-ab3","type":"parent-child","created_at":"2025-12-17T12:59:36.812795+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-pf0","title":"Issue lint report (bd lint)","description":"Check issues for missing recommended template sections based on issue type. Bugs need Steps to Reproduce and Acceptance Criteria, tasks/features need Acceptance Criteria, epics need Success Criteria. Quality gate for sprint planning and issue hygiene.\n\n## Use Case\n\nEnforce issue quality standards by identifying issues that lack critical template sections. This helps maintain issue hygiene during sprint planning and ensures all issues have sufficient context for implementation.\n\n## Type-Specific Requirements\n\n- **Bugs**: Must have \"Steps to Reproduce\" and \"Acceptance Criteria\"\n- **Tasks/Features**: Must have \"Acceptance Criteria\"\n- **Epics**: Must have \"Success Criteria\"\n\n## Benefits\n\n- Catch incomplete issues before they enter sprint\n- Improve issue quality and context\n- Reduce back-and-forth during implementation\n- Support better sprint planning decisions\n","design":"## Architecture\n\nNew `beads-lint.el` module providing issue quality validation.\n\n## UI Components\n\n### Main Lint View (`beads-lint-mode`)\n\n- Derived from `special-mode`\n- Display format:\n  ```\n  Issue Lint Report\n  =================\n\n  ## Bugs (2 issues with problems)\n  bdel-123  Fix login crash           Missing: Steps to Reproduce, Acceptance Criteria\n  bdel-456  Sidebar rendering bug     Missing: Acceptance Criteria\n\n  ## Features (1 issue with problems)\n  bdel-789  Add dark mode support     Missing: Acceptance Criteria\n\n  ## Epics (1 issue with problems)\n  bdel-999  Q1 Performance Sprint     Missing: Success Criteria\n  ```\n\n### Keybindings\n\n- `RET` - View/edit issue at point\n- `g` - Refresh lint report\n- `q` - Quit window\n- `f` - Filter by issue type (bugs only, tasks only, etc.)\n- `n` / `p` - Next/previous issue\n\n### Inline Warnings in Detail View\n\nAdd visual warnings to `beads-show` buffer when viewing issues with missing sections:\n\n```\n[!] Missing required sections: Acceptance Criteria, Steps to Reproduce\n```\n\nDisplay at top of detail buffer, highlighted with warning face.\n\n## RPC Integration\n\nCall `bd lint --json` to get list of issues with problems:\n\n```json\n{\n  \"issues\": [\n    {\n      \"id\": \"bdel-123\",\n      \"title\": \"Fix login crash\",\n      \"type\": \"bug\",\n      \"missing\": [\"steps_to_reproduce\", \"acceptance_criteria\"]\n    }\n  ]\n}\n```\n\nFallback to client-side validation if `bd lint` not available (check all open issues, parse description for section headers).\n\n## Transient Menu Integration\n\nAdd to main transient menu under \"Project Health\":\n\n```\np - Project Health\n  l - Lint report\n  o - Orphans\n  b - Blocked issues\n```\n\n## Implementation Phases\n\n1. Core RPC call and JSON parsing\n2. Basic lint view with issue list\n3. Keybindings and navigation\n4. Inline warnings in detail view\n5. Type filtering\n6. Transient menu integration\n\n## Testing\n\n- Mock RPC responses with various missing section combinations\n- Test navigation and filtering\n- Verify inline warnings appear correctly\n- Test with empty results (all issues clean)\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-06T21:10:25.768475+01:00","created_by":"ctm","updated_at":"2026-01-07T07:43:30.733166+01:00","closed_at":"2026-01-07T07:43:30.733166+01:00","close_reason":"Closed"}
{"id":"bdel-ppm","title":"Implement issue list mode with tabulated-list","description":"Create beads-list.el using tabulated-list-mode. Display columns: ID, status, priority, type, title. See docs/emacs-ui.md Section 2 for column definitions pattern.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T08:06:09.511876+01:00","updated_at":"2025-12-17T08:53:51.989095+01:00","closed_at":"2025-12-17T08:53:51.989095+01:00","close_reason":"Implemented beads-list.el with tabulated-list-mode, formatters, keybindings, and comprehensive tests. Verified working with daemon.","dependencies":[{"issue_id":"bdel-ppm","depends_on_id":"bdel-5w1","type":"parent-child","created_at":"2025-12-17T08:06:21.454582+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"bdel-ppm","depends_on_id":"bdel-e7i","type":"blocks","created_at":"2025-12-17T08:06:31.717382+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-pqi","title":"Migrate detail views to vui.el","status":"tombstone","priority":2,"issue_type":"epic","owner":"noreply@anthropic.com","created_at":"2026-01-14T22:31:16.060235+01:00","created_by":"Christian Tietze","updated_at":"2026-01-14T22:33:17.283553+01:00","deleted_at":"2026-01-14T22:33:17.283553+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"bdel-qzf","title":"Enhanced search with filters and sorting","description":"Current search is basic text matching. Enhanced search adds date range filters (created/updated/closed before/after), priority range, sort options (by priority, created, updated, etc.), and result limits. Enables queries like \"bugs created this week sorted by priority\".","design":"Enhance existing `beads-search` in `beads-transient.el` or create `beads-search-advanced`\n\nNew transient menu `beads-search-menu` with options:\n- Query text input\n- Date filters: created-after, created-before, updated-after, updated-before\n- Priority range: min/max\n- Sort field: priority, created, updated, status, title\n- Sort direction: ascending/descending\n- Limit results\n\nApply search and show results in list view with active filter indicator\n\nKeybinding: `/` already exists, enhance or add `?` for advanced search menu\n\nCLI call: `bd search \"query\" --created-after X --sort priority --json`\n\nStore recent searches for quick re-use","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-06T21:10:26.664584+01:00","created_by":"ctm","updated_at":"2026-01-06T21:10:55.843739+01:00"}
{"id":"bdel-r33","title":"Add rig type face and glyph (beads 0.45)","description":"Beads 0.45 added a new `rig` issue type for Gas Town rig tracking. Add visual support in the list view.","design":"- Add `beads-list-type-rig` face (suggest: dark cyan or teal to distinguish from other types)\n- Add glyph for rig type when `beads-list-type-glyph` is enabled (suggest: \"⚙\" or \"◈\")\n- Update `beads--format-type` to handle \"rig\" type\n- Add test for rig type formatting","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T06:42:23.824037+01:00","created_by":"ctm","updated_at":"2026-01-08T06:48:53.909278+01:00","closed_at":"2026-01-08T06:48:53.909278+01:00","close_reason":"Closed"}
{"id":"bdel-rk1","title":"Add comments from Emacs","description":"c in detail view to add comment via CLI fallback (bd comments add)","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-06T17:09:47.199854+01:00","created_by":"ctm","updated_at":"2026-01-06T17:19:38.692936+01:00","closed_at":"2026-01-06T17:19:38.692936+01:00","close_reason":"Implemented add comment command with CLI fallback in commit dce1079","dependencies":[{"issue_id":"bdel-rk1","depends_on_id":"bdel-kv2","type":"parent-child","created_at":"2026-01-06T17:09:56.321738+01:00","created_by":"ctm"}]}
{"id":"bdel-rny","title":"Add transient menu for list column configuration","description":"Add nested transient to configure list columns buffer-locally. Should include toggles for individual columns with proper ordering, and option to edit the full config variable directly.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T08:51:53.348165+01:00","updated_at":"2025-12-20T08:55:56.999871+01:00","closed_at":"2025-12-20T08:55:56.999871+01:00","close_reason":"Implemented nested transient menus for column configuration with toggles, proper ordering, and customize integration"}
{"id":"bdel-rww","title":"Migrate detail views to vui.el","description":"Migrate beads.el detail view and form editor to use vui.el for declarative, component-based UI rendering.\n\n## Motivation\n\nThe current detail view uses manual text insertion with properties, while the form editor uses Emacs widget.el. vui.el provides:\n- React-style declarative components with automatic re-rendering\n- Better layout primitives (vstack, hstack, box, table)\n- Cleaner state management via component state\n- Improved maintainability through composition\n\n## Current State Analysis\n\n### Detail View (beads-detail.el)\n- Uses direct `insert` with text properties for rendering\n- Layout: Manual positioning with newlines and spaces\n- State: Buffer-local variables (`beads-detail--current-issue`, `beads-detail--current-issue-id`)\n- Fields: ID, title, status, priority, type, assignee, created_by, created_at, parent_id, labels, dependencies, dependents, description, design, acceptance_criteria, comments\n\n### Form Editor (beads-form.el)\n- Uses Emacs widget.el with editable-field, menu-choice, text, push-button widgets\n- State: `beads-form--widgets` alist for value retrieval, `beads-form--original-issue` for change detection\n- Manual widget creation and layout\n\n## vui.el Mapping\n\n| Current | vui.el Equivalent |\n|---------|-------------------|\n| Text insertion + faces | vui-text with :face |\n| Manual newlines | vui-vstack |\n| Side-by-side fields | vui-hstack with vui-box |\n| Clickable text buttons | vui-button |\n| widget editable-field | vui-field |\n| widget menu-choice | vui-select |\n| widget text | vui-field (multi-line) |\n| Buffer-local state | vui-defcomponent :state |\n\n## Architecture\n\n```\nbeads-vui.el           - Foundation: context, shared state, utilities\nbeads-vui-metadata.el  - Metadata row component\nbeads-vui-content.el   - Content sections component\nbeads-vui-relations.el - Dependencies/dependents component\nbeads-vui-comments.el  - Comments display component\nbeads-vui-form.el      - Form field components\n```\n\n## Dependency Graph\n\n```\nbdel-6dn (vui.el dependency)\n    └── bdel-cq9 (foundation module)\n            ├── bdel-ykf (metadata row)\n            ├── bdel-mp1 (content sections)\n            ├── bdel-deb (relationships)\n            ├── bdel-vxu (comments)\n            │       └── bdel-ssf (integrate detail view)\n            │               ├── bdel-bwj (edit affordances)\n            │               └── bdel-8gz (testing)\n            └── bdel-cud (form components)\n                    └── bdel-gkk (form migration)\n                            └── bdel-8gz (testing)\n```","status":"open","priority":2,"issue_type":"epic","owner":"noreply@anthropic.com","created_at":"2026-01-14T22:31:20.670775+01:00","created_by":"Christian Tietze","updated_at":"2026-01-14T22:32:48.416539+01:00","dependencies":[{"issue_id":"bdel-rww","depends_on_id":"bdel-6dn","type":"blocks","created_at":"2026-01-14T22:32:08.978148+01:00","created_by":"Christian Tietze"},{"issue_id":"bdel-rww","depends_on_id":"bdel-cq9","type":"blocks","created_at":"2026-01-14T22:32:10.575421+01:00","created_by":"Christian Tietze"},{"issue_id":"bdel-rww","depends_on_id":"bdel-ykf","type":"blocks","created_at":"2026-01-14T22:32:11.38178+01:00","created_by":"Christian Tietze"},{"issue_id":"bdel-rww","depends_on_id":"bdel-mp1","type":"blocks","created_at":"2026-01-14T22:32:12.201806+01:00","created_by":"Christian Tietze"},{"issue_id":"bdel-rww","depends_on_id":"bdel-deb","type":"blocks","created_at":"2026-01-14T22:32:12.985104+01:00","created_by":"Christian Tietze"},{"issue_id":"bdel-rww","depends_on_id":"bdel-vxu","type":"blocks","created_at":"2026-01-14T22:32:13.704018+01:00","created_by":"Christian Tietze"},{"issue_id":"bdel-rww","depends_on_id":"bdel-ssf","type":"blocks","created_at":"2026-01-14T22:32:14.601501+01:00","created_by":"Christian Tietze"},{"issue_id":"bdel-rww","depends_on_id":"bdel-cud","type":"blocks","created_at":"2026-01-14T22:32:15.576117+01:00","created_by":"Christian Tietze"},{"issue_id":"bdel-rww","depends_on_id":"bdel-gkk","type":"blocks","created_at":"2026-01-14T22:32:16.42663+01:00","created_by":"Christian Tietze"},{"issue_id":"bdel-rww","depends_on_id":"bdel-bwj","type":"blocks","created_at":"2026-01-14T22:32:17.162184+01:00","created_by":"Christian Tietze"},{"issue_id":"bdel-rww","depends_on_id":"bdel-8gz","type":"blocks","created_at":"2026-01-14T22:32:18.058625+01:00","created_by":"Christian Tietze"}]}
{"id":"bdel-ryp","title":"Implement edit status with completing-read","description":"Add 'e s' keybinding to change status:\n- Use completing-read with options: open, in_progress, blocked, closed\n- Current status as default\n- Commit via beads-rpc-update with :status\n- Refresh view after commit","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T12:59:15.21887+01:00","updated_at":"2025-12-17T13:08:02.846882+01:00","closed_at":"2025-12-17T13:08:02.846882+01:00","close_reason":"Completed","dependencies":[{"issue_id":"bdel-ryp","depends_on_id":"bdel-ab3","type":"parent-child","created_at":"2025-12-17T12:59:37.321263+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-s75","title":"Add reopen issue command","description":"Add command to reopen closed issues. Can use beads-rpc-update with status \"open\". Useful from detail view when viewing closed issues.","design":"**Behavior:**\n- Available in detail view when viewing closed issues\n- Binding: 'R' (reopen) or part of status edit flow\n- Optionally prompt for reason: \"Reason for reopening (RET to skip): \"\n- Sets status to \"open\", clears closed_at\n\n**CLI equivalent:** `bd reopen \u003cid\u003e --reason \"reason\"`\n\n**Note:** `bd reopen` is preferred over `bd update --status open` as it emits a Reopened event and clears closed_at timestamp.\n\n**Implementation:**\n- Check if RPC has dedicated \"reopen\" operation\n- If not, use update with status=\"open\" (less ideal but works)\n- Could also add to transient menu under status changes","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-17T19:22:18.650662+01:00","updated_at":"2025-12-17T21:15:59.231641+01:00","closed_at":"2025-12-17T21:15:59.231641+01:00","close_reason":"Implemented with R keybinding, uses beads-rpc-update with status open"}
{"id":"bdel-s8f","title":"Parent navigation in detail view","description":"Show parent in detail metadata, P to go to parent, C to view children","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-06T17:09:43.093328+01:00","created_by":"ctm","updated_at":"2026-01-06T17:16:06.056712+01:00","closed_at":"2026-01-06T17:16:06.056712+01:00","close_reason":"Implemented parent link, goto-parent, and view-children in commit e098ac2","dependencies":[{"issue_id":"bdel-s8f","depends_on_id":"bdel-kv2","type":"parent-child","created_at":"2026-01-06T17:09:56.23205+01:00","created_by":"ctm"}]}
{"id":"bdel-sir","title":"Implement edit title via minibuffer","description":"Add 'e t' keybinding to edit title:\n- Use read-string with current title as default\n- Commit immediately via beads-rpc-update with :title\n- Refresh view after commit\n- Works from both list and detail view","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T12:59:15.084159+01:00","updated_at":"2025-12-17T13:08:02.665283+01:00","closed_at":"2025-12-17T13:08:02.665283+01:00","close_reason":"Completed","dependencies":[{"issue_id":"bdel-sir","depends_on_id":"bdel-ab3","type":"parent-child","created_at":"2025-12-17T12:59:37.187926+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-sk1","title":"Implement labels management","description":"Add label editing commands:\n- 'e l a' - add label (read-string, commit via beads-rpc-label-add)\n- 'e l r' - remove label (completing-read from current labels, beads-rpc-label-remove)\n- Show current labels in prompt","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T12:59:15.814362+01:00","updated_at":"2025-12-17T13:16:33.032671+01:00","closed_at":"2025-12-17T13:16:33.032671+01:00","close_reason":"Implemented label management with 'e l a' (add) and 'e l r' (remove) keybindings","dependencies":[{"issue_id":"bdel-sk1","depends_on_id":"bdel-ab3","type":"parent-child","created_at":"2025-12-17T12:59:45.176077+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-spk","title":"Test duplicate","description":"Same content","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-07T06:54:54.539487+01:00","created_by":"ctm","updated_at":"2026-01-07T06:55:11.889476+01:00","deleted_at":"2026-01-07T06:55:11.889476+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"bdel-ssf","title":"Integrate vui components into detail view","description":"Replace current beads-detail--render with vui-mount using the new components. Wire up state and refresh callbacks.","status":"open","priority":2,"issue_type":"task","owner":"noreply@anthropic.com","created_at":"2026-01-14T22:31:55.181044+01:00","created_by":"Christian Tietze","updated_at":"2026-01-14T22:31:55.181044+01:00","dependencies":[{"issue_id":"bdel-ssf","depends_on_id":"bdel-ykf","type":"blocks","created_at":"2026-01-14T22:32:32.072871+01:00","created_by":"Christian Tietze"},{"issue_id":"bdel-ssf","depends_on_id":"bdel-mp1","type":"blocks","created_at":"2026-01-14T22:32:32.141041+01:00","created_by":"Christian Tietze"},{"issue_id":"bdel-ssf","depends_on_id":"bdel-deb","type":"blocks","created_at":"2026-01-14T22:32:32.20273+01:00","created_by":"Christian Tietze"},{"issue_id":"bdel-ssf","depends_on_id":"bdel-vxu","type":"blocks","created_at":"2026-01-14T22:32:32.270545+01:00","created_by":"Christian Tietze"}]}
{"id":"bdel-t63","title":"Collapsible sections in detail view","description":"Add collapsible sections to the detail view for long-form fields (description, design, acceptance, notes). The metadata section at top should remain always visible. Users should be able to configure which sections start collapsed.","design":"## Research: Modern Emacs Help Buffer Approach\n\nEmacs 29+ help buffers (`C-h b` describe-bindings) use `outline-minor-mode` with clickable fold/unfold buttons. Here's exactly how they do it:\n\n```elisp\n;; From describe-bindings in help.el:\n(setq-local outline-regexp \".*:$\")\n(setq-local outline-heading-end-regexp \":\\n\")\n(setq-local outline-level (lambda () 1))\n(setq-local outline-minor-mode-cycle t\n            outline-minor-mode-highlight t\n            outline-minor-mode-use-buttons 'insert\n            outline-default-state 1)\n(outline-minor-mode 1)\n```\n\n## Key outline-minor-mode Variables\n\n| Variable | Purpose |\n|----------|---------|\n| `outline-regexp` | Regex to identify heading lines |\n| `outline-search-function` | **Alternative**: custom function to find headings (can use text properties!) |\n| `outline-level` | Function returning nesting level of current heading |\n| `outline-minor-mode-cycle` | Enable TAB/S-TAB to cycle visibility |\n| `outline-minor-mode-highlight` | Apply faces to headings |\n| `outline-minor-mode-use-buttons` | Show fold/unfold buttons: `nil`, `t`, `'insert`, `'in-margins` |\n| `outline-default-state` | Initial visibility: `nil` (all visible), number (collapse deeper levels) |\n\n## Button Display Options\n\n- `nil` - No buttons, just ellipsis \"...\" for hidden content\n- `t` - Clickable buttons displayed via overlay (doesn't modify buffer)\n- `'insert` - Buttons inserted into buffer text (modifies buffer, RET works)\n- `'in-margins` - Buttons in left margin (doesn't modify buffer)\n\nFor read-only special-mode buffers, `'insert` is fine since we rebuild on refresh anyway.\n\n## The Problem with outline-regexp\n\nOur detail buffer contains user-entered text (description, design notes) which can contain ANY characters including lines ending with colons. Using `outline-regexp` would incorrectly treat user text as headings.\n\n## Solution: outline-search-function with Text Properties\n\nSince we build the buffer from scratch, we have full control. Instead of regex matching, we:\n\n1. **Propertize headings** when rendering:\n```elisp\n(insert (propertize \"Description:\" \n                    'beads-outline-heading t\n                    'beads-heading-name 'description))\n```\n\n2. **Define custom search function**:\n```elisp\n(defun beads-detail--outline-search (bound move backward looking-at)\n  \"Find headings by text property instead of regex.\"\n  (if looking-at\n      (get-text-property (point) 'beads-outline-heading)\n    (let ((prop-match (if backward\n                          (text-property-search-backward 'beads-outline-heading t t)\n                        (text-property-search-forward 'beads-outline-heading t t))))\n      (when prop-match\n        (goto-char (prop-match-beginning prop-match))\n        (set-match-data (list (prop-match-beginning prop-match)\n                              (prop-match-end prop-match)))\n        t))))\n```\n\n3. **Configure outline-minor-mode**:\n```elisp\n(setq-local outline-search-function #'beads-detail--outline-search)\n(setq-local outline-level (lambda () 1))  ; All sections same level\n(setq-local outline-minor-mode-cycle t)\n(setq-local outline-minor-mode-use-buttons 'insert)\n(outline-minor-mode 1)\n```\n\n## Sections to Make Collapsible\n\nOnly long-form text fields, NOT the metadata header:\n- Description\n- Design Notes  \n- Acceptance Criteria\n- Notes\n\nThe top metadata (ID, status, priority, type, dates) should always be visible.\n\n## User Configuration\n\n```elisp\n(defcustom beads-detail-collapsed-sections '()\n  \"Sections collapsed by default in detail view.\nList of symbols: description, design, acceptance, notes.\nEmpty list means all sections expanded.\"\n  :type '(set (const :tag \"Description\" description)\n              (const :tag \"Design Notes\" design)\n              (const :tag \"Acceptance Criteria\" acceptance)\n              (const :tag \"Notes\" notes))\n  :group 'beads-detail)\n```\n\nAfter rendering, iterate through sections and collapse those in the list.\n\n## Implementation Steps\n\n1. Add `beads-detail-collapsed-sections` defcustom\n2. Modify `beads-detail--render` to propertize section headings\n3. Add `beads-detail--outline-search` function\n4. Configure outline-minor-mode in `beads-detail-mode`\n5. Add post-render step to collapse configured sections\n6. Test TAB cycling and button clicks\n\n## Navigation Affordances\n\nWith outline-minor-mode enabled, users get:\n- TAB on heading: cycle fold state (hidden → children → all)\n- S-TAB: cycle entire buffer\n- Clickable ▶/▼ buttons (with 'insert mode)\n- `outline-next-heading` / `outline-previous-heading` for navigation\n- Standard outline commands available\n\n## Future: Apply to Other Buffers\n\nThis pattern (text-property-based outline headings) can be reused for:\n- Hierarchy view (if we want collapsible subtrees beyond widget folding)\n- Any future buffer we build from scratch with sections\n\nThe key insight: when you control buffer construction, prefer text properties over regex for outline detection.","notes":"## Failed Implementation Attempt (2025-12-18)\n\n### What We Tried\n\n1. **outline-minor-mode with custom outline-search-function**\n   - Used text properties (`beads-outline-heading`) to mark headings\n   - Custom search function to find headings by property instead of regex\n   - Problems encountered:\n     - `outline-minor-mode-use-buttons` causes Emacs to hang\n     - `outline-heading-end-regexp \":\\n\"` matches user content (e.g., code blocks with `\":\\n\"`)\n     - `outline-hide-subtree` only hides children (lower levels), but all our headings are level 1\n     - `outline-hide-entry` worked partially but inconsistently\n\n2. **Custom invisible property approach**\n   - Replaced outline-minor-mode entirely\n   - Used `beads-detail--section-body-bounds` to find body region by text properties\n   - Toggle `invisible` property directly\n   - Problems:\n     - Finding heading on current line unreliable\n     - Property boundaries don't align with line boundaries as expected\n\n### Root Causes\n\n1. **outline-minor-mode assumes regex-based heading detection** - Even with `outline-search-function`, other parts of outline (like `outline-heading-end-regexp`) still use regex matching which can match user content.\n\n2. **User content is unpredictable** - Design notes contain markdown, code blocks, etc. Any regex pattern will eventually match something in user content.\n\n3. **Text property boundaries are tricky** - The heading property needs to include the newline for outline to work, but this interacts poorly with line-based operations.\n\n### Possible Future Approaches\n\n1. **Use a unique prefix character** for headings that won't appear in user content (e.g., a zero-width space or special Unicode char), then use standard outline-regexp.\n\n2. **Implement folding from scratch** without outline-minor-mode - use overlays with `invisible` property, manage state ourselves.\n\n3. **Use widgets** like `tree-widget` or similar that have built-in folding support.\n\n4. **Defer to a later Emacs version** that may have better outline-search-function support.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-18T08:24:50.707055+01:00","updated_at":"2025-12-18T22:48:30.098584+01:00","closed_at":"2025-12-18T22:48:30.098588+01:00"}
{"id":"bdel-tv1","title":"Add stats display","description":"Display project statistics. Options: header line in list view, dedicated command, or transient menu section. RPC exists (beads-rpc-stats).","design":"**What bd stats shows:**\n```\nTotal Issues:      53\nOpen:              19\nIn Progress:       0\nClosed:            34\nBlocked:           7\nReady:             12\nAvg Lead Time:     0.6 hours\n```\n\n**Implementation options:**\n1. **Header line in list view** - Show counts in header: \"53 issues (19 open, 7 blocked, 12 ready)\"\n2. **Dedicated command** - `M-x beads-stats` opens temp buffer with full stats\n3. **Transient menu section** - Display stats at top of `?` menu\n\n**Recommendation:** Option 1 (header line) for quick glance, plus Option 2 for full details.\n\n**RPC:** `beads-rpc-stats` already exists, returns JSON with all counts.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-17T19:22:18.805941+01:00","updated_at":"2025-12-18T07:25:05.59382+01:00","closed_at":"2025-12-18T07:25:05.59382+01:00","close_reason":"Implemented header line stats in list view, beads-stats command, S keybinding, and transient menu entries"}
{"id":"bdel-u2z","title":"Duplicate detection view (bd duplicates)","description":"Find issues with identical content (title, description, design, acceptance criteria) to clean up after bulk imports or collaborative work. Groups issues by content hash and suggests merge targets based on reference count. Essential for maintaining a clean issue database.","design":"New beads-duplicates.el module with beads-duplicates-mode derived from special-mode.\n\nDisplay duplicate groups with suggested merge target highlighted. Show: group number, issue IDs, titles, reference counts.\n\nKeybindings:\n- RET: view issue\n- m: merge this into canonical\n- M: merge all in group\n- g: refresh\n- q: quit\n\nFeatures:\n- Confirmation prompt before merge operations\n- Add to transient menu under project health/maintenance\n- CLI calls: bd duplicates --json, bd duplicate \u003cid\u003e --of \u003ccanonical\u003e\n- Consider dry-run preview before actual merge\n\nImplementation:\n- Parse bd duplicates --json output\n- Group duplicate issues by content hash\n- Highlight canonical issue (highest reference count)\n- Integrate with existing beads.el navigation patterns\n- Follow beads-ready.el as reference for layout and keybindings","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-06T21:10:25.880988+01:00","created_by":"ctm","updated_at":"2026-01-07T06:58:57.587415+01:00","closed_at":"2026-01-07T06:58:57.587415+01:00","close_reason":"Closed"}
{"id":"bdel-uxi","title":"Implement transient menus","description":"Create beads-transient.el with transient.el menus for view switching, filtering, and actions. Dynamic descriptions showing current state. See docs/emacs-ui.md Section 6.","notes":"Keybindings: ? and C-c m should both show the transient menu","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T08:06:09.903018+01:00","updated_at":"2025-12-17T09:10:24.173244+01:00","closed_at":"2025-12-17T09:10:24.173244+01:00","close_reason":"Implemented beads-transient.el with main menu, placeholder commands, and keybindings","dependencies":[{"issue_id":"bdel-uxi","depends_on_id":"bdel-5w1","type":"parent-child","created_at":"2025-12-17T08:06:21.713727+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"bdel-uxi","depends_on_id":"bdel-aw7","type":"blocks","created_at":"2025-12-17T08:06:31.873138+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-v02","title":"Type glyphs + colors for special types","description":"Add visual distinction for gate/convoy/agent/role types with optional glyph prefix and colored faces","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-06T17:09:41.919995+01:00","created_by":"ctm","updated_at":"2026-01-06T17:13:05.989985+01:00","closed_at":"2026-01-06T17:13:05.989985+01:00","close_reason":"Implemented type faces and optional glyphs in commit 2b181d7","dependencies":[{"issue_id":"bdel-v02","depends_on_id":"bdel-kv2","type":"parent-child","created_at":"2026-01-06T17:09:56.18151+01:00","created_by":"ctm"}]}
{"id":"bdel-v3z","title":"Publish beads.el to MELPA","description":"Submit beads.el package to MELPA for distribution. This makes the package easily installable via package.el.","design":"**Prerequisites:**\n- Package header conventions (done: beads.el has proper headers)\n- Single entry point file or clear autoloads\n- README with installation/usage instructions\n- License file (GPL-compatible)\n\n**MELPA submission steps:**\n1. Fork https://github.com/melpa/melpa\n2. Create recipe file in `recipes/beads`:\n   ```elisp\n   (beads :fetcher github\n          :repo \"ChristianTietze/beads.el\"\n          :files (\"lisp/*.el\"))\n   ```\n3. Test locally with `make recipes/beads`\n4. Submit PR to melpa/melpa\n\n**Alternative:** NonGNU ELPA (requires FSF-compatible contributor agreement)\n\n**Checklist before submission:**\n- [ ] Verify all files have proper headers\n- [ ] Ensure autoloads work correctly\n- [ ] Test fresh install from git\n- [ ] Update README with MELPA badge/instructions","notes":"**Done:**\n- Fixed URL in beads.el header\n- Added transient and hierarchy to Package-Requires\n- Updated README with MELPA/straight.el installation\n- Created MELPA recipe in docs/melpa-recipe\n- Verified autoloads are correct\n\n**Remaining manual steps:**\n1. Fork https://github.com/melpa/melpa\n2. Copy docs/melpa-recipe to recipes/beads in fork\n3. Test locally: `make recipes/beads`\n4. Submit PR to melpa/melpa","status":"in_progress","priority":3,"issue_type":"task","created_at":"2025-12-20T13:48:54.688368+01:00","updated_at":"2025-12-20T14:49:34.296513+01:00","comments":[{"id":2,"issue_id":"bdel-v3z","author":"ctm","text":"The recipe is simple but I'm not sure when we're ready. Thoughts?","created_at":"2026-01-06T20:09:55Z"}]}
{"id":"bdel-vxu","title":"Implement vui comments component","description":"Create vui component for displaying comments with author, timestamp, and markdown-rendered content.","status":"open","priority":2,"issue_type":"task","owner":"noreply@anthropic.com","created_at":"2026-01-14T22:31:54.319184+01:00","created_by":"Christian Tietze","updated_at":"2026-01-14T22:31:54.319184+01:00","dependencies":[{"issue_id":"bdel-vxu","depends_on_id":"bdel-cq9","type":"blocks","created_at":"2026-01-14T22:32:32.010197+01:00","created_by":"Christian Tietze"}]}
{"id":"bdel-wch","title":"beads.el 0.44 compatibility and new features","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-06T07:42:10.65823+01:00","created_by":"ctm","updated_at":"2026-01-06T08:17:44.819194+01:00","closed_at":"2026-01-06T08:17:44.819194+01:00","close_reason":"All compatibility fixes and new features implemented","comments":[{"id":1,"issue_id":"bdel-wch","author":"ctm","text":"Test comment for comments feature","created_at":"2026-01-06T07:11:21Z"}]}
{"id":"bdel-wh7","title":"Quick assign from list view","description":"Currently assigning issues requires opening the form editor. Add a quick keybinding in list view for rapid triage - especially useful when processing a backlog and assigning multiple issues in sequence.","design":"Emacs UI implementation:\n- Add beads-list-quick-assign command in beads-list.el\n- Keybinding: 'a' in list view\n- Prompt with completion showing known assignees from current issues\n- Include \"me\" or current $USER as quick option\n- Support bulk assign if marks are active\n- Refresh list after assignment\n- Add to list transient menu\n- RPC call: beads-rpc-update with :assignee\n- Consider also adding 'A' for \"assign to me\" (self-assign shortcut)","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-06T21:10:25.291468+01:00","created_by":"ctm","updated_at":"2026-01-07T17:18:20.13886+01:00","closed_at":"2026-01-07T17:18:20.13886+01:00","close_reason":"Closed"}
{"id":"bdel-wqc","title":"Bulk operations in list view","description":"Add ability to mark/select multiple issues and perform bulk operations (close, change status, add label, delete). Common pattern in Emacs: mark with 'm', unmark with 'u', execute with 'x'.","design":"**Pattern:** Follow dired/ibuffer marking convention\n\n**Bindings:**\n- `m` - Mark issue at point\n- `u` - Unmark issue at point\n- `U` - Unmark all\n- `t` - Toggle marks\n- `% m` - Mark by regexp (on title)\n\n**Bulk operations (on marked issues):**\n- `x` or `B c` - Bulk close\n- `B s` - Bulk set status\n- `B p` - Bulk set priority\n- `B l` - Bulk add label\n- `B D` - Bulk delete (with yes-or-no-p)\n\n**Implementation:**\n- Add `beads-list--marked` buffer-local variable (list of IDs)\n- Display mark indicator in first column (e.g., `*`)\n- Bulk operations iterate over marked, call RPC for each\n- Show progress: \"Closing 3 issues...\"\n\n**Reference:** Similar to `dired-do-*` commands, `ibuffer-do-*`","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-17T19:22:42.400434+01:00","updated_at":"2025-12-20T09:35:53.02902+01:00","closed_at":"2025-12-20T09:35:53.02902+01:00","close_reason":"Implemented dired-style marking and bulk operations: mark column, m/u/U/t marking commands, % m and * m for regexp, * * for filtered view, and B s/p/c/D for bulk status/priority/close/delete"}
{"id":"bdel-x0t","title":"'q' should clear filter before quitting list buffer","description":"When a search or filter is active in the beads list view, pressing 'q' immediately buries the buffer. This is unexpected - users often want to exit the filtered view to see all issues again, not close the list entirely.\n\nCurrent behavior:\n1. User searches/filters issues\n2. User presses 'q' expecting to exit search mode\n3. Buffer is buried - user loses their place\n\nExpected behavior:\n1. User searches/filters issues\n2. User presses 'q' → filter is cleared, full list shown\n3. User presses 'q' again → buffer is buried\n\nThis matches common UI patterns where 'q' progressively exits nested states before closing the view entirely.","design":"Implementation in beads-list.el:\n\n# Approach\nModify the 'q' keybinding to check for active filters before quitting.\n\n# Implementation\n1. Create beads-list-quit-or-clear command:\n   - If beads-list--filter is non-nil, clear it and refresh\n   - Otherwise call quit-window\n\n2. Update keymap to use new command for 'q'\n\n3. Also check beads-list--filter-state if used for stateful filters\n\n# Visual Feedback\n- Show \"[filtered]\" indicator in mode-line when filter active\n- Message \"Filter cleared\" on first 'q'\n\n# Alternative: Escape key\nConsider binding ESC to clear filter (common pattern), leaving 'q' for quit.\n\n# Tests\n- Test q clears filter when filter active\n- Test q quits when no filter active\n- Test q after clearing filter quits","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-06T21:18:55.21034+01:00","created_by":"ctm","updated_at":"2026-01-06T21:22:05.049007+01:00","closed_at":"2026-01-06T21:22:05.049007+01:00","close_reason":"Implemented in commit b0c0824"}
{"id":"bdel-xkf","title":"Implement preview mode (quicklook)","description":"Create beads-preview.el minor mode for automatic preview updates as selection changes. Uses post-command-hook with idle timer debouncing, buffer pooling, deduplication. See docs/emacs-ui.md Section 3.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T08:06:09.663679+01:00","updated_at":"2025-12-17T09:22:23.873517+01:00","closed_at":"2025-12-17T09:22:23.873517+01:00","close_reason":"Implemented beads-preview.el with quicklook functionality","dependencies":[{"issue_id":"bdel-xkf","depends_on_id":"bdel-5w1","type":"parent-child","created_at":"2025-12-17T08:06:21.538561+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"bdel-xkf","depends_on_id":"bdel-ijt","type":"blocks","created_at":"2025-12-17T08:06:31.792643+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-xo4","title":"In hierarchy view 'H' show whole tree","description":"Currently, toggling the hierarchy view shows the task-at-point in a tree view. But that's not helpful to discover related tasks when you start at a leaf node in a dependency tree. The hierarchy should show all trees leading to/including the task-at-point instead. This could be multiple dependencies. First, we need to explore how to customize the hierarchies displayed in the hierarchy view. Can we show multiple trees at all? If not, do we need to reverse the order, not from root-to-leaves as parent-\u003echild, but instead task-\u003eblocked-task so that if task A blocks B and C, we show\n\nA\n- B\n- C\n\nwhen we cannot show\n\nB\n- A\nC\n- A","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-27T21:42:44.907265+01:00","updated_at":"2026-01-08T15:04:07.850035+01:00","closed_at":"2026-01-08T15:04:07.850035+01:00","close_reason":"Implemented bidirectional tree using bd dep tree --direction=both"}
{"id":"bdel-xoe","title":"Add undo/redo keybindings and menu entries","description":"Add keybindings and transient menu entries:\n\nKeybindings:\n- `u` in beads-list-mode-map → beads-undo\n- `u` in beads-detail-mode-map → beads-undo\n- `U` in both → beads-redo\n\nTransient menus:\n- Add \"Undo\" section to beads-list-menu and beads-detail-menu\n- Show undo/redo commands\n\nUpdate hints in beads.el to mention `u` for undo.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T15:01:31.743985+01:00","updated_at":"2025-12-17T15:01:31.743985+01:00","dependencies":[{"issue_id":"bdel-xoe","depends_on_id":"bdel-dyk","type":"parent-child","created_at":"2025-12-17T15:01:46.560075+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"bdel-xoe","depends_on_id":"bdel-0kf","type":"blocks","created_at":"2025-12-17T15:01:59.412194+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-y1k","title":"Integrate undo with beads-list.el (list view edits)","description":"Add undo recording to list view inline edits:\n\n- beads-list-edit-title\n- beads-list-edit-status\n- beads-list-edit-priority\n- beads-list-edit-type\n- beads-list-edit-description\n\nSame pattern as detail view - record before RPC call.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T15:01:31.55886+01:00","updated_at":"2025-12-17T15:01:31.55886+01:00","dependencies":[{"issue_id":"bdel-y1k","depends_on_id":"bdel-dyk","type":"parent-child","created_at":"2025-12-17T15:01:46.404285+01:00","created_by":"daemon","metadata":"{}"},{"issue_id":"bdel-y1k","depends_on_id":"bdel-0kf","type":"blocks","created_at":"2025-12-17T15:01:59.258086+01:00","created_by":"daemon","metadata":"{}"}]}
{"id":"bdel-ydh","title":"Form editor: C-c C-c / C-c C-k don't work inside text fields","description":"The save (C-c C-c) and cancel (C-c C-k) keybindings shown at the top of the form editor only work when point is outside text fields. When editing inside an editable-field or text widget, these bindings don't trigger.\n\nThis is likely because widget keymaps override the mode keymap. Need to extend the widget-specific keymaps (widget-field-keymap, widget-text-keymap) or use a different binding strategy.","design":"**Investigation needed**:\n- Check `widget-field-keymap` and `widget-text-keymap` \n- See how Custom-mode handles this (does it have the same issue?)\n- Options:\n  1. Add bindings to widget keymaps via `:keymap` property on widget creation\n  2. Use `define-key` on the widget-specific keymaps after widget-setup\n  3. Use a minor mode that takes precedence","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-17T18:33:21.379699+01:00","updated_at":"2025-12-17T18:38:55.810674+01:00","closed_at":"2025-12-17T18:38:55.810674+01:00","close_reason":"Fixed by passing custom keymaps with C-c bindings to widgets via :keymap property"}
{"id":"bdel-ykf","title":"Implement vui metadata row component","description":"Create vui component displaying issue metadata (status, priority, type, assignee, created_by, created_at) in a horizontal layout with proper faces.","status":"open","priority":2,"issue_type":"task","owner":"noreply@anthropic.com","created_at":"2026-01-14T22:31:51.170832+01:00","created_by":"Christian Tietze","updated_at":"2026-01-14T22:31:51.170832+01:00","dependencies":[{"issue_id":"bdel-ykf","depends_on_id":"bdel-cq9","type":"blocks","created_at":"2026-01-14T22:32:31.806046+01:00","created_by":"Christian Tietze"}]}
{"id":"bdel-yks","title":"Write package documentation (Info manual)","description":"Create an Info manual for beads.el that integrates with Emacs's built-in help system (C-h i).","design":"## Overview\n\nEmacs packages use **Texinfo** format for documentation, which compiles to **Info** manuals viewable with `C-h i`. There are two approaches:\n\n### Option 1: Write in Org-mode (Recommended)\nModern packages like Magit use Org-mode and export to Texinfo. This is easier to maintain.\n\n**Steps:**\n1. Create `beads.org` in project root\n2. Add Texinfo export headers:\n   ```org\n   #+TITLE: Beads User Manual\n   #+AUTHOR: Beads Contributors\n   #+TEXINFO_DIR_CATEGORY: Emacs misc features\n   #+TEXINFO_DIR_TITLE: Beads: (beads)\n   #+TEXINFO_DIR_DESC: Git-backed issue tracker for Emacs\n   ```\n3. Write documentation using Org headings\n4. Export: `C-c C-e i i` (directly to .info) or `C-c C-e i t` (to .texi)\n\n### Option 2: Write in Texinfo directly\nTraditional approach, more control but steeper learning curve.\n\n**Minimal .texi structure:**\n```texinfo\n\\input texinfo\n@setfilename beads.info\n@settitle Beads User Manual\n\n@dircategory Emacs misc features\n@direntry\n* Beads: (beads).       Git-backed issue tracker.\n@end direntry\n\n@node Top\n@top Beads User Manual\n\n@menu\n* Introduction::\n* Installation::\n* Usage::\n@end menu\n\n@node Introduction\n@chapter Introduction\n...\n@bye\n```\n\n## MELPA Integration\n\n- Include `.texi` file in package (MELPA builds .info automatically)\n- Or include pre-built `.info` file\n- Add to recipe: `:files (\"lisp/*.el\" \"beads.texi\")`\n\n## Testing Locally\n\n1. Generate info: `makeinfo beads.texi`\n2. Preview in Emacs: `C-c C-m C-b` in Texinfo mode\n3. Or: `M-x info-display-manual` after installing\n\n## Suggested Manual Structure\n\n1. Introduction (what is Beads)\n2. Installation (MELPA, manual, straight.el)\n3. Quick Start (basic workflow)\n4. List View (keybindings, filtering, sorting, marking)\n5. Detail View (viewing/editing issues)\n6. Form Editor (widget-based editing)\n7. Hierarchy View (dependency trees)\n8. Customization (variables, faces)\n9. Daemon (bd daemon requirements)\n\n## References\n\n- Org Texinfo export: https://orgmode.org/manual/Texinfo-Export.html\n- GNU Texinfo manual: https://www.gnu.org/software/texinfo/manual/texinfo/\n- ox-texinfo+ for enhanced export: elpa-ox-texinfo+","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T07:01:53.26242+01:00","updated_at":"2025-12-23T07:38:11.833822+01:00","closed_at":"2025-12-23T07:38:11.833822+01:00","close_reason":"Comprehensive Info manual created with multi-perspective review"}
{"id":"bdel-zor","title":"Whole-line highlighting for P0 priority issues","description":"Enhance visual distinction of P0 (critical) issues by highlighting the entire row in the list view, not just the priority column. This makes critical issues immediately visible when scanning the list.","design":"## Goal\n\nMake P0 issues visually \"pop\" by applying a distinctive background color to the entire row, similar to how `region` face extends to EOL. This mimics AppKit/NSTableView's \"row style\" pattern where row background is drawn first, then cells on top.\n\n## Extension Points in tabulated-list.el\n\n| Extension Point | Scope | Purpose |\n|----------------|-------|---------|\n| `tabulated-list-printer` | Buffer-local var | **Official hook** - set to custom print function |\n| `tabulated-list-revert-hook` | Global hook | Runs before revert (too early for row styling) |\n| Advice on `tabulated-list-print-entry` | Global | Wrap the default printer |\n\n## Key Technique: Face Layering\n\nThe key to AppKit-like \"row background first, cells on top\" is `font-lock-prepend-text-property`. It adds faces at the *front* of the face list, which in Emacs means **lower priority** (later faces win). So column faces \"draw on top\" of the row face.\n\n```elisp\n;; Prepend = lower priority = \"behind\" existing faces\n(font-lock-prepend-text-property beg end 'face 'row-background)\n```\n\n## Approaches Comparison\n\n### Approach 1: Buffer-Local Custom Printer (Recommended)\n\n**Mechanism**: Set `tabulated-list-printer` to our function in mode setup.\n\n```elisp\n(defun beads-list--print-entry (id cols)\n  \"Print entry with row-level styling for P0 issues.\"\n  (let ((beg (point)))\n    (tabulated-list-print-entry id cols)\n    (when-let ((row-face (beads-list--row-face-for-id id)))\n      (font-lock-prepend-text-property beg (point) 'face row-face))))\n\n;; In beads-list-mode setup:\n(setq-local tabulated-list-printer #'beads-list--print-entry)\n```\n\n| Aspect | Assessment |\n|--------|------------|\n| Scope | Buffer-local ✅ |\n| Invasiveness | None - uses official API ✅ |\n| Mode check needed | No ✅ |\n| Column reorder safe | Yes ✅ |\n| Face layering | Correct with prepend ✅ |\n| Coupling | Calls `tabulated-list-print-entry` directly |\n\n**Robustness**: ⭐⭐⭐⭐⭐ Best option - designed extension point, buffer-local, no global side effects.\n\n### Approach 2: Global Advice on `tabulated-list-print-entry`\n\n**Mechanism**: `:around` advice wraps the default printer globally.\n\n```elisp\n(defun beads-list--with-row-style (orig-fn id cols)\n  \"Apply row background style, then let cells draw on top.\"\n  (let ((beg (point)))\n    (funcall orig-fn id cols)\n    (when (derived-mode-p 'beads-list-mode)\n      (when-let ((row-face (beads-list--row-face-for-id id)))\n        (font-lock-prepend-text-property beg (point) 'face row-face)))))\n\n(advice-add 'tabulated-list-print-entry :around #'beads-list--with-row-style)\n```\n\n| Aspect | Assessment |\n|--------|------------|\n| Scope | Global ⚠️ |\n| Invasiveness | Low but global |\n| Mode check needed | Yes (`derived-mode-p`) |\n| Column reorder safe | Yes ✅ |\n| Face layering | Correct with prepend ✅ |\n| Coupling | Uses `orig-fn`, future-proof |\n\n**Robustness**: ⭐⭐⭐⭐ Good, but global advice adds complexity. Useful if we can't control mode setup or want to patch other modes.\n\n### Approach 3: Post-Print Overlays\n\n**Mechanism**: After `tabulated-list-print`, walk buffer and add overlays.\n\n```elisp\n(defun beads-list--apply-row-overlays ()\n  \"Add overlays to P0 rows after printing.\"\n  (beads-list--remove-row-overlays)  ; Clean up first\n  (save-excursion\n    (goto-char (point-min))\n    (while (not (eobp))\n      (when-let* ((id (tabulated-list-get-id))\n                  (row-face (beads-list--row-face-for-id id)))\n        (let ((ov (make-overlay (pos-bol) (1+ (pos-eol)))))\n          (overlay-put ov 'face row-face)\n          (overlay-put ov 'beads-row-overlay t)\n          (overlay-put ov 'priority -10)))  ; Low priority = behind\n      (forward-line 1))))\n\n;; Hook into refresh\n(add-hook 'tabulated-list-revert-hook #'beads-list--apply-row-overlays nil t)\n```\n\n| Aspect | Assessment |\n|--------|------------|\n| Scope | Buffer-local ✅ |\n| Invasiveness | None - separate layer |\n| Mode check needed | No (hook is local) |\n| Column reorder safe | Yes ✅ |\n| Face layering | Overlay priority controls |\n| Coupling | None - fully decoupled |\n\n**Robustness**: ⭐⭐⭐ Decoupled but requires lifecycle management. Extra pass on every refresh. Good for layering multiple highlights (P0 + marked).\n\n### Approach 4: Face with `:extend t` on Column\n\n**Mechanism**: Apply face with `:extend t` to rightmost column.\n\n```elisp\n(defun beads--format-title (issue)\n  (let ((title (alist-get 'title issue \"\")))\n    (if (= 0 (alist-get 'priority issue))\n        (propertize title 'face 'beads-list-row-p0)\n      title)))\n```\n\n| Aspect | Assessment |\n|--------|------------|\n| Scope | Per-column |\n| Invasiveness | Minimal |\n| Mode check needed | No |\n| Column reorder safe | **No** ❌ |\n| Face layering | N/A - single column |\n| Coupling | Tight to column order |\n\n**Robustness**: ⭐⭐ Simple but fragile. Only extends from column to EOL, not BOL. Breaks if columns reordered or hidden.\n\n## Summary Matrix\n\n| Approach | Robustness | Complexity | Scope | Column-Safe | Layering |\n|----------|-----------|------------|-------|-------------|----------|\n| 1. Buffer-local printer | ⭐⭐⭐⭐⭐ | Low | Local | ✅ | ✅ |\n| 2. Global advice | ⭐⭐⭐⭐ | Medium | Global | ✅ | ✅ |\n| 3. Post-print overlays | ⭐⭐⭐ | Medium | Local | ✅ | ✅ |\n| 4. Column `:extend t` | ⭐⭐ | Low | Column | ❌ | N/A |\n\n## Recommended Approach\n\n**Approach 1 (Buffer-local custom printer)** is the clear winner:\n\n1. Uses the official, documented extension point (`tabulated-list-printer`)\n2. Buffer-local scope - no global side effects\n3. Single-pass, applied at print time\n4. Works regardless of column configuration\n5. `font-lock-prepend-text-property` correctly layers row face behind column faces\n\n**Fallback**: Approach 3 (overlays) if we need to layer multiple independent highlights (e.g., P0 + marked + search match).\n\n## Implementation Plan\n\n1. Define `beads-list-row-p0` face with `:extend t`\n2. Add `beads-list--row-face-for-id` helper to determine row face\n3. Create `beads-list--print-entry` custom printer\n4. Set `tabulated-list-printer` in `beads-list-mode` setup\n5. Add `beads-list-highlight-priority-rows` defcustom (default t)\n6. Test with various column configurations\n\n## Face Definition\n\n```elisp\n(defface beads-list-row-p0\n  '((((class color) (background light))\n     :background \"#ffe0e0\" :extend t)\n    (((class color) (background dark))\n     :background \"#4a1a1a\" :extend t))\n  \"Face for entire row of P0 priority issues.\nUses `:extend t' to highlight to end of line.\nDesigned to layer behind column-specific faces.\")\n```\n\n## Testing Checklist\n\n- [ ] P0 rows highlighted in default column config\n- [ ] Highlighting works after column reorder via transient\n- [ ] Highlighting works when columns hidden\n- [ ] Column-specific faces (status colors, etc.) still visible on top\n- [ ] Works with marking (marked P0 should show both indicators)\n- [ ] Performance acceptable with 100+ issues\n- [ ] Works in both light and dark themes (modus, doom, default)\n- [ ] No interference with other tabulated-list buffers","status":"closed","priority":3,"issue_type":"feature","assignee":"ctm","created_at":"2025-12-23T06:32:38.232856+01:00","updated_at":"2026-01-13T09:29:10.471198+01:00","closed_at":"2026-01-09T08:12:13.297078+01:00","close_reason":"Implemented in f40a646","labels":["enhancement","faces","ui"]}
