[tools]
go = "latest"
python = "latest"

[tasks.lint]
description = "Check Emacs Lisp syntax and parentheses"
run = "python3 scripts/lint.py"

[tasks.test]
description = "Run ERT tests"
run = "python3 scripts/test.py"

[tasks.build]
description = "Byte-compile Emacs Lisp files"
run = "python3 scripts/build.py"

[tasks.check]
description = "Run lint and test"
depends = ["lint", "test"]

[tasks.interactive]
description = "Launch Emacs with beads.el loaded for interactive testing"
depends = ["build"]
run = "emacs -nw --init-directory=dev"

[tasks.docs]
description = "Build Info manual from beads.org"
run = """
emacs --batch docs/beads.org \
  --eval "(require 'ox-texinfo)" \
  -f org-texinfo-export-to-texinfo && \
makeinfo --no-split docs/beads.texi -o docs/beads.info
"""

[tasks."docs:view"]
description = "Build and view Info manual"
depends = ["docs"]
run = "info ./docs/beads.info"
